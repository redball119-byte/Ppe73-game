<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í™˜ê²½ê´€ë¦¬ PPE êµìœ¡ í€´ì¦ˆ (ëŠë¦°ë²„ì „)</title>
  <style>
    :root{
      --bg:#071022;
      --card:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --good:#22c55e;
      --bad:#ef4444;
      --btn:#1f8b4c;
      --btn2:rgba(255,255,255,.10);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:radial-gradient(1200px 700px at 50% 0%, rgba(71,125,255,.18), transparent 60%),
                 radial-gradient(900px 500px at 50% 100%, rgba(34,197,94,.10), transparent 55%),
                 var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      overflow:hidden;
    }
    .wrap{
      max-width:520px;
      margin:0 auto;
      padding:14px 14px 18px;
      height:100vh;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .topRow{
      display:flex;
      gap:10px;
      align-items:stretch;
    }
    .pill{
      flex:1;
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:12px 14px;
      text-align:left;
      backdrop-filter: blur(10px);
    }
    .pill small{display:block; color:var(--muted); font-weight:600; letter-spacing:.2px}
    .pill b{display:block; font-size:18px; margin-top:4px}
    .scoreBox{
      width:110px;
      text-align:center;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:2px;
    }
    .scoreBox b{font-size:22px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      border-radius:22px;
      padding:14px 14px 12px;
      backdrop-filter: blur(10px);
    }
    .title{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      margin-bottom:8px;
    }
    .title h1{
      font-size:20px;
      margin:0;
      line-height:1.25;
      text-align:left;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
      text-align:left;
      line-height:1.45;
    }

    /* ë–¨ì–´ì§€ëŠ” ì˜ì—­ */
    #stage{
      position:relative;
      flex:1;
      min-height:340px;
      border-radius:22px;
      overflow:hidden;
      border:1px solid var(--stroke);
      background:
        radial-gradient(600px 260px at 50% 15%, rgba(255,255,255,.06), transparent 60%),
        rgba(0,0,0,.10);
    }
    .hint{
      position:absolute;
      left:50%;
      top:45%;
      transform:translate(-50%,-50%);
      color:rgba(234,240,255,.35);
      font-weight:800;
      letter-spacing:.2px;
      text-align:center;
      padding:0 18px;
      line-height:1.35;
    }
    .timerPill{
      position:absolute;
      right:10px;
      top:10px;
      background:rgba(0,0,0,.25);
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:8px 12px;
      font-weight:700;
      color:var(--text);
      font-size:14px;
      display:none;
    }

    .fall{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:-80px;
      width:min(84%, 420px);
      padding:16px 16px 14px;
      border-radius:20px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      text-align:left;
      pointer-events:none;
      opacity:0;
    }
    .fall .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:800;
      font-size:12px;
      color:rgba(234,240,255,.85);
      padding:6px 10px;
      border-radius:999px;
      background:rgba(34,197,94,.12);
      border:1px solid rgba(34,197,94,.22);
      margin-bottom:10px;
    }
    .fall .disease{
      font-size:26px;
      font-weight:900;
      margin:6px 0 8px;
      letter-spacing:.2px;
    }
    .fall .desc{
      color:var(--muted);
      margin:0;
      font-size:14px;
      line-height:1.45;
    }

    /* ì„ íƒ ì˜ì—­ */
    .bottom{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .rowTitle{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:0 2px;
    }
    .rowTitle b{font-size:18px}
    .rowTitle small{color:var(--muted); font-weight:700}
    .grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
    }
    .btn{
      border:none;
      width:100%;
      border-radius:18px;
      padding:14px 12px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      color:var(--text);
      font-weight:900;
      font-size:17px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
    }
    .btn span{
      font-size:12px;
      color:var(--muted);
      font-weight:800;
    }
    .btn.selected{
      border-color:rgba(34,197,94,.55);
      box-shadow: 0 0 0 3px rgba(34,197,94,.18) inset;
    }

    .actions{
      display:flex;
      gap:10px;
    }
    .action{
      flex:1;
      border:none;
      border-radius:18px;
      padding:14px 12px;
      font-size:18px;
      font-weight:900;
      color:var(--text);
      background:rgba(255,255,255,.08);
      border:1px solid var(--stroke);
    }
    .start{
      background:rgba(34,197,94,.14);
      border:1px solid rgba(34,197,94,.30);
      color:var(--text);
    }
    .start:disabled{
      opacity:.55;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:92px;
      transform:translateX(-50%);
      width:min(92vw, 520px);
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:12px 14px;
      display:none;
      text-align:left;
      color:var(--text);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .toast b{display:block; margin-bottom:4px}
    .toast small{color:var(--muted); font-weight:700}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topRow">
      <div class="pill">
        <small>ğŸ§¹ í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</small>
        <b>ëŠë¦°ë²„ì „</b>
      </div>
      <div class="pill scoreBox">
        <small>ë¬¸í•­</small>
        <b id="qCount">0 / 10</b>
      </div>
      <div class="pill scoreBox">
        <small>ì ìˆ˜</small>
        <b id="score">0</b>
      </div>
    </div>

    <div class="card">
      <div class="title">
        <h1>ì§ˆë³‘/ìƒí™©ì„ ë³´ê³ <br><span style="color:#9fb7ff">ê¸°ë³¸ ë³´í˜¸êµ¬ 1ê°œ</span>ë¥¼ ê³ ë¥´ì„¸ìš”</h1>
      </div>
      <p class="sub">â‘  ì‹œì‘ì„ ëˆ„ë¥´ë©´ ì§ˆë³‘ëª…ì´ â€œì²œì²œíˆâ€ ë–¨ì–´ì§‘ë‹ˆë‹¤. â‘¡ ì•„ë˜ì—ì„œ ë³´í˜¸êµ¬ 1ê°œë¥¼ ì„ íƒí•˜ë©´ ìë™ ì±„ì ë©ë‹ˆë‹¤.</p>
    </div>

    <div id="stage" class="card" style="padding:0;">
      <div id="timer" class="timerPill">â³ <span id="t">8.0</span>s</div>
      <div id="hint" class="hint">ì‹œì‘ì„ ëˆ„ë¥´ë©´<br>ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤</div>
      <div id="fall" class="fall" aria-live="polite">
        <div class="tag">ğŸ¦  ì§ˆë³‘/ìƒí™©</div>
        <div class="disease" id="diseaseText">-</div>
        <p class="desc" id="descText">-</p>
      </div>
    </div>

    <div class="bottom">
      <div class="rowTitle">
        <b>ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</b>
        <small id="status">ëŒ€ê¸°ì¤‘</small>
      </div>
      <div class="grid" id="ppeGrid"></div>

      <div class="actions">
        <button id="startBtn" class="action start">ì‹œì‘</button>
        <button id="resetBtn" class="action">ë¦¬ì…‹</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">
    <b id="toastTitle">-</b>
    <small id="toastBody">-</small>
  </div>

<script>
/** =========================
 *  ì„¤ì •(ëŠë¦°ë²„ì „)
 *  ========================= */
const QUESTIONS = [
  { name:"ê²°í•µ(ì˜ì‹¬) - ê¸°ì¹¨/ê°€ë˜", desc:"ì—ì–´ë¡œì¡¸ ë…¸ì¶œ ê°€ëŠ¥. ë³‘ì‹¤ ì¶œì… ì‹œ í˜¸í¡ê¸° ë³´í˜¸ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.", answer:"N95" },
  { name:"ë…¸ë¡œë°”ì´ëŸ¬ìŠ¤ - êµ¬í† /ì„¤ì‚¬", desc:"ë¶„ë³€/êµ¬í† ë¬¼ ì˜¤ì—¼ ìœ„í—˜. ì†/ì ‘ì´‰ ì˜¤ì—¼ì— ì£¼ì˜í•©ë‹ˆë‹¤.", answer:"GLOVE" },
  { name:"C. difficile ì˜ì‹¬ - ì„¤ì‚¬", desc:"ì ‘ì´‰ ì „íŒŒ ë° í™˜ê²½ ì˜¤ì—¼ ìœ„í—˜. ì†/ì ‘ì´‰ ì˜¤ì—¼ì— ì£¼ì˜í•©ë‹ˆë‹¤.", answer:"GLOVE" },
  { name:"ì¸í”Œë£¨ì—”ì - ê¸°ì¹¨/ë°œì—´", desc:"ë¹„ë§ ë…¸ì¶œ ê°€ëŠ¥. ê·¼ê±°ë¦¬ ì‘ì—… ì‹œ ë¹„ë§ ë³´í˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.", answer:"SURG" },
  { name:"ì²´ì•¡ íŠ ê°€ëŠ¥ ì‘ì—…(í™˜ê²½ ì†Œë…)", desc:"ì†Œë…ì•¡/ì˜¤ì—¼ë¬¼ íŠ ìœ„í—˜. ëˆˆ/ì–¼êµ´ ë³´í˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.", answer:"GOGGLE" },
  { name:"í˜ˆì•¡/ì²´ì•¡ ì˜¤ì—¼ë¬¼ ì²˜ë¦¬", desc:"ì† ì˜¤ì—¼ ìœ„í—˜ì´ í½ë‹ˆë‹¤. ë¨¼ì € ì¥ê°‘ì„ ì„ íƒí•©ë‹ˆë‹¤.", answer:"GLOVE" },
  { name:"ê²©ë¦¬ë³‘ì‹¤ ë§ê¸°(í‡´ì‹¤) ì²­ì†Œ", desc:"ì˜¤ì—¼ ì ‘ì´‰ ê°€ëŠ¥. ì† ì˜¤ì—¼ ì˜ˆë°©ì´ ìš°ì„ ì…ë‹ˆë‹¤.", answer:"GLOVE" },
  { name:"ì¹¨êµ¬/íê¸°ë¬¼ ì·¨ê¸‰", desc:"ì˜¤ì—¼ ì ‘ì´‰ ìœ„í—˜. ì† ë³´í˜¸ê°€ ê¸°ë³¸ì…ë‹ˆë‹¤.", answer:"GLOVE" },
  { name:"ë¶„ë¬´ ì†Œë…/ê³ ì•• ì„¸ì²™", desc:"ëˆˆ/ì–¼êµ´ íŠ ìœ„í—˜ì´ í½ë‹ˆë‹¤. ì•ˆë©´ë³´í˜¸ê°€ ìš°ì„ ì…ë‹ˆë‹¤.", answer:"GOGGLE" },
  { name:"ê¸°ì¹¨í™˜ì ì£¼ë³€ í™˜ê²½ê´€ë¦¬", desc:"ë¹„ë§ ë…¸ì¶œ ê°€ëŠ¥. ìˆ˜ìˆ ë§ˆìŠ¤í¬ë¥¼ ì°©ìš©í•©ë‹ˆë‹¤.", answer:"SURG" },
];

const PPE = [
  { key:"SURG", label:"ìˆ˜ìˆ ë§ˆìŠ¤í¬", sub:"ë¹„ë§/ë¶„ë¬´" },
  { key:"N95",  label:"N95", sub:"ì—ì–´ë¡œì¡¸" },
  { key:"GLOVE",label:"ì¥ê°‘", sub:"ì²´ì•¡/ì ‘ì´‰" },
  { key:"GOGGLE",label:"ê³ ê¸€/ì•ˆë©´ë³´í˜¸", sub:"ëˆˆÂ·ì–¼êµ´ íŠ" },
];

// ì†ë„(ëŠë¦¬ê²Œ)
const FALL_DURATION_MS = 4500;  // ì§ˆë³‘ëª… ë–¨ì–´ì§€ëŠ” ì‹œê°„(ëŠë¦¬ê²Œ)
const THINK_TIME_SEC = 8.0;     // ì„ íƒ ì œí•œì‹œê°„(ëŠë¦¬ê²Œ)
const BETWEEN_Q_MS = 800;       // ë‹¤ìŒ ë¬¸ì œê¹Œì§€ ë”œë ˆì´

/** =========================
 *  ìƒíƒœ
 *  ========================= */
let idx = 0;
let score = 0;
let running = false;
let timerInterval = null;
let remaining = THINK_TIME_SEC;
let answered = false;

const $ = (id)=>document.getElementById(id);
const ppeGrid = $("ppeGrid");
const fallBox = $("fall");
const diseaseText = $("diseaseText");
const descText = $("descText");
const hint = $("hint");
const timerPill = $("timer");
const tEl = $("t");
const qCount = $("qCount");
const scoreEl = $("score");
const statusEl = $("status");
const toast = $("toast");
const toastTitle = $("toastTitle");
const toastBody = $("toastBody");
const startBtn = $("startBtn");
const resetBtn = $("resetBtn");

/** =========================
 *  UI ìƒì„±
 *  ========================= */
function renderPPE(){
  ppeGrid.innerHTML = "";
  PPE.forEach(item=>{
    const btn = document.createElement("button");
    btn.className = "btn";
    btn.type = "button";
    btn.dataset.key = item.key;
    btn.innerHTML = `${item.label}<span>${item.sub}</span>`;
    btn.addEventListener("click", ()=> onPick(item.key, btn));
    ppeGrid.appendChild(btn);
  });
}

function setSelected(key){
  document.querySelectorAll(".btn").forEach(b=>{
    b.classList.toggle("selected", b.dataset.key === key);
  });
}

function showToast(title, body){
  toastTitle.textContent = title;
  toastBody.textContent = body;
  toast.style.display = "block";
  clearTimeout(showToast._t);
  showToast._t = setTimeout(()=> toast.style.display="none", 1300);
}

/** =========================
 *  ê²Œì„ ë¡œì§
 *  ========================= */
function updateHeader(){
  qCount.textContent = `${idx} / ${QUESTIONS.length}`;
  scoreEl.textContent = String(score);
}

function stopTimer(){
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = null;
}

function startTimer(){
  remaining = THINK_TIME_SEC;
  tEl.textContent = remaining.toFixed(1);
  timerPill.style.display = "inline-flex";
  stopTimer();
  timerInterval = setInterval(()=>{
    remaining -= 0.1;
    if(remaining < 0) remaining = 0;
    tEl.textContent = remaining.toFixed(1);

    if(remaining <= 0){
      stopTimer();
      if(!answered){
        answered = true;
        statusEl.textContent = "ì‹œê°„ì´ˆê³¼";
        showToast("ì‹œê°„ì´ˆê³¼", "ì •ë‹µì„ ì„ íƒí•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
        nextQuestion();
      }
    }
  }, 100);
}

function animateFall(q){
  // ì´ˆê¸° ìƒíƒœ
  fallBox.style.transition = "none";
  fallBox.style.opacity = "0";
  fallBox.style.top = "-90px";

  // ë‚´ìš© ì±„ìš°ê¸°(ê¸€ì”¨!)
  diseaseText.textContent = q.name;
  descText.textContent = q.desc;

  // ê°•ì œ ë¦¬í”Œë¡œìš°
  void fallBox.offsetWidth;

  // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
  fallBox.style.transition = `top ${FALL_DURATION_MS}ms linear, opacity 350ms ease`;
  fallBox.style.opacity = "1";
  fallBox.style.top = "120px";  // ì¤‘ê°„ì¯¤ì—ì„œ ë©ˆì¶”ê²Œ

  // ë–¨ì–´ì§„ ë’¤ ë©ˆì¶˜ ìƒíƒœ ìœ ì§€ (ì„ íƒì‹œê°„ ë™ì•ˆ)
}

function clearStage(){
  fallBox.style.opacity = "0";
  fallBox.style.top = "-90px";
  timerPill.style.display = "none";
  hint.style.display = "block";
}

function startGame(){
  if(running) return;
  running = true;
  startBtn.disabled = true;
  idx = 0;
  score = 0;
  answered = false;
  statusEl.textContent = "ì§„í–‰ì¤‘";
  updateHeader();
  nextQuestion(true);
}

function nextQuestion(isFirst=false){
  stopTimer();
  document.querySelectorAll(".btn").forEach(b=>b.classList.remove("selected"));

  if(idx >= QUESTIONS.length){
    running = false;
    startBtn.disabled = false;
    statusEl.textContent = "ì™„ë£Œ";
    showToast("ë!", `ì´ì : ${score} / ${QUESTIONS.length}`);
    timerPill.style.display = "none";
    hint.style.display = "block";
    hint.innerHTML = `ë!<br>ì´ì : <b style="color:#9fb7ff">${score}/${QUESTIONS.length}</b><br>ë¦¬ì…‹ ë˜ëŠ” ì‹œì‘`;
    return;
  }

  const q = QUESTIONS[idx];
  answered = false;
  hint.style.display = "none";

  // í—¤ë” ê°±ì‹ 
  updateHeader();

  // ì§ˆë³‘ ë–¨ì–´ëœ¨ë¦¬ê¸°
  animateFall(q);

  // íƒ€ì´ë¨¸ ì‹œì‘
  startTimer();

  // idx ì¦ê°€(í˜„ì¬ ë¬¸ì œ ë²ˆí˜¸ í‘œì‹œë¥¼ ìœ„í•´ ë¨¼ì € ë³´ì—¬ì¤¬ê³ , ë‹¤ìŒìœ¼ë¡œ ì´ë™í•˜ê¸° ìœ„í•´ +1)
  idx++;
  updateHeader();
}

function onPick(key, btn){
  if(!running) return;
  if(answered) return;
  answered = true;

  setSelected(key);

  const q = QUESTIONS[idx-1];
  const correct = (key === q.answer);

  if(correct){
    score += 1;
    statusEl.textContent = "ì •ë‹µ!";
    showToast("ì •ë‹µ âœ…", `${q.name} â†’ ${getPpeLabel(q.answer)}`);
  }else{
    statusEl.textContent = "ì˜¤ë‹µ";
    showToast("ì˜¤ë‹µ âŒ", `ì •ë‹µ: ${getPpeLabel(q.answer)}`);
  }
  updateHeader();

  stopTimer();
  setTimeout(()=> nextQuestion(), BETWEEN_Q_MS);
}

function getPpeLabel(key){
  const p = PPE.find(x=>x.key===key);
  return p ? p.label : key;
}

function resetGame(){
  running = false;
  startBtn.disabled = false;
  stopTimer();
  idx = 0;
  score = 0;
  statusEl.textContent = "ëŒ€ê¸°ì¤‘";
  updateHeader();
  clearStage();
  hint.innerHTML = "ì‹œì‘ì„ ëˆ„ë¥´ë©´<br>ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤";
  document.querySelectorAll(".btn").forEach(b=>b.classList.remove("selected"));
  toast.style.display = "none";
}

renderPPE();
resetGame();

startBtn.addEventListener("click", startGame);
resetBtn.addEventListener("click", resetGame);
</script>
</body>
</html>
