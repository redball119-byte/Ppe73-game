<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>PPE ì„ íƒ í€´ì¦ˆ (ëŠë¦°ë²„ì „)</title>
  <style>
    :root{
      --bg:#071022;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.68);
      --good:#22c55e;
      --bad:#ef4444;
      --accent:#60a5fa;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background: radial-gradient(900px 700px at 50% -150px, rgba(96,165,250,.25), transparent 60%),
                  radial-gradient(900px 700px at 50% 120%, rgba(34,197,94,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      overflow:hidden;
    }

    .wrap{
      width:100vw;
      height:100vh;
      padding: 18px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .top{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--stroke);
      box-shadow: 0 10px 25px rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-weight: 800;
      letter-spacing: -.2px;
    }
    .pill small{font-weight:700; color:var(--muted)}
    .score{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 14px;
      position:relative;
      overflow:hidden;
    }

    .title{
      font-weight: 900;
      font-size: 20px;
      letter-spacing:-.4px;
      margin: 2px 0 6px;
    }
    .desc{
      margin:0;
      color:var(--muted);
      line-height:1.35;
      font-weight:650;
      font-size: 14px;
    }
    .metaRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
      border:1px solid var(--stroke);
      color: var(--muted);
      font-weight:800;
      font-size: 13px;
    }
    .tag strong{color:var(--text)}

    /* Game area */
    .game{
      flex:1;
      min-height: 360px;
      position:relative;
      border-radius: var(--radius);
      background: radial-gradient(600px 420px at 50% 20%, rgba(255,255,255,.06), transparent 60%),
                  rgba(0,0,0,.10);
      border:1px solid var(--stroke);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
      overflow:hidden;
    }
    .laneHint{
      position:absolute;
      left:0; right:0; top:0; bottom:0;
      pointer-events:none;
      background:
        linear-gradient(90deg, transparent 0%, rgba(255,255,255,.05) 50%, transparent 100%);
      opacity:.06;
    }
    .slot{
      position:absolute;
      left:50%;
      top: 52%;
      transform: translate(-50%, -50%);
      width: min(92vw, 420px);
      height: 150px;
      border-radius: 22px;
      background: rgba(255,255,255,.04);
      border:1px dashed rgba(255,255,255,.14);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 16px;
      text-align:center;
      color: rgba(234,240,255,.45);
      font-weight: 900;
      letter-spacing:-.3px;
    }
    .falling{
      position:absolute;
      left:50%;
      top:-120px;
      transform: translateX(-50%);
      width: min(92vw, 420px);
      padding: 14px 14px;
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(96,165,250,.20), rgba(255,255,255,.06));
      border:1px solid rgba(96,165,250,.28);
      box-shadow: 0 22px 55px rgba(0,0,0,.40);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      text-align:left;
    }
    .falling .kicker{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.12);
      font-weight:900;
      color: rgba(234,240,255,.90);
      font-size: 13px;
      margin-bottom:10px;
    }
    .falling .disease{
      font-size: 22px;
      font-weight: 950;
      letter-spacing: -.5px;
      margin:0 0 6px;
      line-height:1.15;
    }
    .falling .note{
      margin:0;
      color: rgba(234,240,255,.72);
      font-weight: 750;
      font-size: 14px;
      line-height:1.25;
    }
    .timer{
      position:absolute;
      right:14px;
      top:14px;
      padding: 10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.22);
      border:1px solid var(--stroke);
      font-weight: 950;
      letter-spacing: -.3px;
    }
    .timer small{font-weight:900; color: var(--muted)}

    /* Options */
    .options{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .btn{
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border-radius: 18px;
      padding: 14px 12px;
      color: var(--text);
      text-align:left;
      display:flex;
      gap:12px;
      align-items:center;
      box-shadow: 0 12px 30px rgba(0,0,0,.22);
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      font-weight: 950;
    }
    .btn .icon{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.10);
      font-size: 22px;
    }
    .btn .txt{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .btn .txt small{
      color: var(--muted);
      font-weight: 850;
    }
    .btn:active{ transform: scale(.99); }

    /* Feedback modal */
    .overlay{
      position:absolute;
      inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modal{
      width: min(92vw, 420px);
      border-radius: 24px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
      padding: 16px 16px 14px;
      text-align:center;
    }
    .modal h2{
      margin: 2px 0 6px;
      font-size: 22px;
      letter-spacing:-.5px;
      font-weight: 1000;
    }
    .modal p{
      margin:0 0 12px;
      color: var(--muted);
      font-weight: 800;
      line-height:1.35;
    }
    .modal .row{
      display:flex;
      gap:10px;
      justify-content:center;
      margin-top: 10px;
    }
    .primary{
      flex:1;
      border:none;
      border-radius: 16px;
      padding: 13px 14px;
      background: rgba(34,197,94,.18);
      color: #eafff0;
      border:1px solid rgba(34,197,94,.35);
      font-weight: 950;
      cursor:pointer;
    }
    .ghost{
      flex:1;
      border-radius: 16px;
      padding: 13px 14px;
      background: rgba(255,255,255,.05);
      color: var(--text);
      border:1px solid rgba(255,255,255,.12);
      font-weight: 950;
      cursor:pointer;
    }

    .footerRow{
      display:flex;
      gap:10px;
    }
    .bigBtn{
      flex:1;
      border-radius: 18px;
      padding: 14px 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: var(--text);
      font-weight: 950;
      letter-spacing:-.2px;
      cursor:pointer;
      box-shadow: 0 12px 28px rgba(0,0,0,.22);
    }
    .bigBtn.start{
      background: rgba(96,165,250,.16);
      border:1px solid rgba(96,165,250,.35);
    }
    .bigBtn.reset{
      background: rgba(255,255,255,.05);
    }
    .hint{
      text-align:center;
      color: rgba(234,240,255,.55);
      font-weight: 800;
      font-size: 12px;
      margin-top: -4px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="pill">ğŸ§¹ í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ <small>ëŠë¦°ë²„ì „</small></div>
      <div class="score">
        <div class="pill">ë¬¸í•­ <span id="qNow">0</span>/<span id="qTotal">10</span></div>
        <div class="pill">ì ìˆ˜ <span id="score">0</span></div>
      </div>
    </div>

    <div class="card">
      <div class="title">ì§ˆë³‘/ìƒí™©ì„ ë³´ê³  <span style="color:var(--accent)">ê¸°ë³¸ ë³´í˜¸êµ¬ 1ê°œ</span>ë¥¼ ê³ ë¥´ì„¸ìš”</div>
      <p class="desc">ì§ˆë³‘ëª…ì´ ìœ„ì—ì„œ â€œë–¨ì–´ì ¸ì„œâ€ ì¤‘ì•™ì— ë©ˆì¶¥ë‹ˆë‹¤. ì•„ë˜ 4ê°œ ì¤‘ ì •ë‹µ 1ê°œë¥¼ ëˆ„ë¥´ë©´ ë‹¤ìŒ ë¬¸í•­ìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤. (ì´ 10ë¬¸í•­)</p>
      <div class="metaRow">
        <div class="tag">â±ï¸ ì œí•œì‹œê°„ <strong><span id="timeLimit">6</span>ì´ˆ</strong></div>
        <div class="tag">ğŸ¢ ì†ë„ <strong>ëŠë¦¼</strong></div>
        <div class="tag">ğŸ¯ ëŒ€ìƒ <strong>í™˜ê²½ê´€ë¦¬ìš”ì›</strong></div>
      </div>
    </div>

    <div class="game" id="game">
      <div class="laneHint"></div>
      <div class="timer" id="timer">â³ <span id="tLeft">6.0</span><small>s</small></div>

      <div class="slot" id="slot">ì‹œì‘ì„ ëˆ„ë¥´ë©´<br/>ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤</div>
      <div class="falling" id="falling" aria-hidden="true" style="display:none;">
        <div class="kicker" id="kicker">ğŸ¦  ê°ì—¼ë³‘/ìƒí™©</div>
        <div class="disease" id="diseaseTitle">-</div>
        <p class="note" id="diseaseNote">-</p>
      </div>

      <div class="overlay" id="overlay">
        <div class="modal" id="modal">
          <h2 id="resultTitle">ì •ë‹µ</h2>
          <p id="resultBody">-</p>
          <div class="row">
            <button class="ghost" id="againBtn">ë‹¤ì‹œ</button>
            <button class="primary" id="nextBtn">ë‹¤ìŒ</button>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="title" style="font-size:18px;margin-bottom:10px;">ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</div>
      <div class="options" id="options"></div>
      <div class="footerRow" style="margin-top:12px;">
        <button class="bigBtn start" id="startBtn">ì‹œì‘</button>
        <button class="bigBtn reset" id="resetBtn">ë¦¬ì…‹</button>
      </div>
      <div class="hint">íŒ: â€œì‹œê°„ì´ ë„ˆë¬´ ë¹ ë¥´ë©´â€ ì•„ë˜ ì½”ë“œì—ì„œ <b>ì œí•œì‹œê°„(ì´ˆ)</b>ë¥¼ 7~8ë¡œ ì˜¬ë¦¬ë©´ ë©ë‹ˆë‹¤.</div>
    </div>
  </div>

  <script>
    // ====== ì„¤ì •(ëŠë¦°ë²„ì „) ======
    const TOTAL = 10;
    const TIME_LIMIT = 6.0;      // ë¬¸í•­ ì œí•œì‹œê°„(ì´ˆ) â€” ë” ëŠë¦¬ê²Œ í•˜ë ¤ë©´ 7~8ë¡œ
    const FALL_DURATION = 2400;  // ì§ˆë³‘ëª… ë–¨ì–´ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜(ms) â€” ë” ëŠë¦¬ê²Œ í•˜ë ¤ë©´ 2800~3200

    // í™˜ê²½ê´€ë¦¬ìš”ì›ìš© "ê¸°ë³¸ ë³´í˜¸êµ¬" 4ê°œ(ì›í•˜ë©´ ì´ë¦„ë§Œ ë°”ê¿”ë„ ë¨)
    const PPE = [
      { id:"mask",  label:"ìˆ˜ìˆ ë§ˆìŠ¤í¬", sub:"ë¹„ë§/ë¶„ë¬´", icon:"ğŸ˜·" },
      { id:"n95",   label:"N95(í˜¸í¡ë³´í˜¸)", sub:"ê³µê¸°/ì—ì–´ë¡œì¡¸", icon:"ğŸ«" },
      { id:"gown",  label:"ê°€ìš´/ì•ì¹˜ë§ˆ", sub:"ì˜¤ì—¼Â·íŠ€ê¹€", icon:"ğŸ¥¼" },
      { id:"eye",   label:"ê³ ê¸€/ì•ˆë©´ë³´í˜¸", sub:"ëˆˆÂ·ì–¼êµ´ íŠ", icon:"ğŸ¥½" },
    ];

    // 10ë¬¸í•­(ì›í•˜ëŠ” ëŒ€ë¡œ ë¬¸êµ¬ ì§§ê²Œ êµ¬ì„±)
    // answer: PPE id ì¤‘ í•˜ë‚˜
    const QUESTIONS = [
      { title:"ê²°í•µ ì˜ì‹¬ (ê¸°ì¹¨Â·ê°ë‹´)", note:"ê³µê¸° ì „íŒŒ ê°€ëŠ¥", kicker:"ğŸ¦  ê³µê¸°ì£¼ì˜ ìƒí™©", answer:"n95" },
      { title:"êµ¬í† /ì„¤ì‚¬ë¡œ í™”ì¥ì‹¤ ì˜¤ì—¼", note:"ì˜¤ì—¼ ì ‘ì´‰ ìœ„í—˜", kicker:"ğŸ§» ì ‘ì´‰ì˜¤ì—¼ ìƒí™©", answer:"gown" },
      { title:"í˜ˆì•¡/ì²´ì•¡ íŠ ê°€ëŠ¥ ì‘ì—…", note:"ëˆˆÂ·ì–¼êµ´ ë³´í˜¸ í•„ìš”", kicker:"ğŸ’¦ íŠ/ë¹„ë§ ìƒí™©", answer:"eye" },
      { title:"ì¹¨Â·ë¶„ë¹„ë¬¼ ë§ì€ í™˜ì ì£¼ë³€ ì²­ì†Œ", note:"ë¹„ë§ ë…¸ì¶œ ê°€ëŠ¥", kicker:"ğŸ’§ ë¹„ë§ ìƒí™©", answer:"mask" },
      { title:"ì—ì–´ë¡œì¡¸ ë°œìƒ ê°€ëŠ¥í•œ ì²˜ì¹˜ì‹¤ ì²­ì†Œ", note:"ë¯¸ì„¸ì…ì ë…¸ì¶œ", kicker:"ğŸŒ¬ï¸ ì—ì–´ë¡œì¡¸ ìƒí™©", answer:"n95" },
      { title:"ì¹¨ëŒ€ë‚œê°„Â·ì†ì¡ì´ ì§‘ì¤‘ ì†Œë…", note:"í‘œë©´ ì˜¤ì—¼ ì ‘ì´‰", kicker:"ğŸ§¼ í‘œë©´ ì ‘ì´‰ ìƒí™©", answer:"gown" },
      { title:"ë¶„ë¬´ ì†Œë…(ìŠ¤í”„ë ˆì´) ì‚¬ìš©", note:"ëˆˆ/ì–¼êµ´ íŠ ì£¼ì˜", kicker:"ğŸ§´ ë¶„ë¬´ ìƒí™©", answer:"eye" },
      { title:"ê°ì—¼ë³‘ ì˜ì‹¬ ë³‘ì‹¤ ì¶œì…", note:"ê¸°ë³¸ ë¹„ë§ ì˜ˆë°©", kicker:"ğŸšª ë³‘ì‹¤ ì¶œì…", answer:"mask" },
      { title:"ëŒ€ë³€/ì˜¤ë¬¼ ì²˜ë¦¬ ë™ë°˜ ì²­ì†Œ", note:"ì˜¤ì—¼Â·íŠ€ê¹€ ìœ„í—˜", kicker:"ğŸª£ ì˜¤ë¬¼ ì²˜ë¦¬", answer:"gown" },
      { title:"í™˜ì ê·¼ì ‘ ì‘ì—…(ê¸°ì¹¨ ì¦ìŒ)", note:"ë¹„ë§ ë…¸ì¶œ ê°€ëŠ¥", kicker:"ğŸ˜®â€ğŸ’¨ ë¹„ë§ ìƒí™©", answer:"mask" },
    ];

    // ====== ìƒíƒœ ======
    let qIndex = 0;
    let score = 0;
    let running = false;
    let timerHandle = null;
    let tStart = 0;

    const elQNow = document.getElementById("qNow");
    const elQTotal = document.getElementById("qTotal");
    const elScore = document.getElementById("score");
    const elTimeLimit = document.getElementById("timeLimit");

    const game = document.getElementById("game");
    const slot = document.getElementById("slot");
    const falling = document.getElementById("falling");
    const kicker = document.getElementById("kicker");
    const diseaseTitle = document.getElementById("diseaseTitle");
    const diseaseNote = document.getElementById("diseaseNote");

    const overlay = document.getElementById("overlay");
    const resultTitle = document.getElementById("resultTitle");
    const resultBody = document.getElementById("resultBody");
    const nextBtn = document.getElementById("nextBtn");
    const againBtn = document.getElementById("againBtn");

    const options = document.getElementById("options");
    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");
    const tLeftEl = document.getElementById("tLeft");

    elQTotal.textContent = TOTAL;
    elTimeLimit.textContent = TIME_LIMIT.toFixed(0);

    // ====== ë²„íŠ¼ ìƒì„± ======
    function renderOptions(){
      options.innerHTML = "";
      PPE.forEach(p => {
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.innerHTML = `
          <div class="icon">${p.icon}</div>
          <div class="txt">
            <div>${p.label}</div>
            <small>${p.sub}</small>
          </div>
        `;
        btn.addEventListener("click", () => {
          if(!running) return;
          answer(p.id);
        }, {passive:true});
        options.appendChild(btn);
      });
    }
    renderOptions();

    // ====== ê²Œì„ ë¡œì§ ======
    function startGame(){
      score = 0;
      qIndex = 0;
      updateHUD();
      overlay.style.display = "none";
      slot.innerHTML = "ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤â€¦";
      startRound();
    }

    function resetGame(){
      running = false;
      clearTimer();
      overlay.style.display = "none";
      falling.style.display = "none";
      slot.innerHTML = "ì‹œì‘ì„ ëˆ„ë¥´ë©´<br/>ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤";
      qIndex = 0;
      score = 0;
      updateHUD();
      tLeftEl.textContent = TIME_LIMIT.toFixed(1);
    }

    function updateHUD(){
      elQNow.textContent = Math.min(qIndex, TOTAL);
      elScore.textContent = score;
    }

    function clearTimer(){
      if(timerHandle){
        cancelAnimationFrame(timerHandle);
        timerHandle = null;
      }
    }

    function startRound(){
      if(qIndex >= TOTAL){
        finish();
        return;
      }
      running = true;
      overlay.style.display = "none";
      falling.style.display = "block";

      const q = QUESTIONS[qIndex];

      kicker.textContent = q.kicker;
      diseaseTitle.textContent = q.title;
      diseaseNote.textContent = q.note;

      // Falling animation: ìœ„ì—ì„œ ë–¨ì–´ì ¸ì„œ slot ìœ„ì¹˜ì— ë©ˆì¶¤
      const slotRect = slot.getBoundingClientRect();
      const gameRect = game.getBoundingClientRect();
      const targetTop = (slotRect.top - gameRect.top) + 8; // ì•½ê°„ ìœ„ë¡œ
      falling.style.top = (-140) + "px";
      falling.style.transition = "none";

      // ê°•ì œ ë¦¬í”Œë¡œìš°
      void falling.offsetHeight;

      // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
      requestAnimationFrame(() => {
        falling.style.transition = `top ${FALL_DURATION}ms cubic-bezier(.18,.84,.25,1)`;
        falling.style.top = (targetTop) + "px";
      });

      // íƒ€ì´ë¨¸ ì‹œì‘(ëŠë¦¬ê²Œ)
      tStart = performance.now();
      tick();
    }

    function tick(){
      const now = performance.now();
      const elapsed = (now - tStart) / 1000;
      const left = Math.max(0, TIME_LIMIT - elapsed);
      tLeftEl.textContent = left.toFixed(1);

      if(left <= 0){
        running = false;
        showResult(false, "ì‹œê°„ ì´ˆê³¼!", `ì •ë‹µì€ <b>${ppeLabel(QUESTIONS[qIndex].answer)}</b> ì…ë‹ˆë‹¤.`);
        return;
      }
      timerHandle = requestAnimationFrame(tick);
    }

    function ppeLabel(id){
      const p = PPE.find(x=>x.id===id);
      return p ? p.label : id;
    }

    function answer(choice){
      running = false;
      clearTimer();

      const q = QUESTIONS[qIndex];
      const ok = (choice === q.answer);

      if(ok){
        score += 1;
        showResult(true, "ì •ë‹µ âœ…", `ì„ íƒ: <b>${ppeLabel(choice)}</b><br/>ì„¤ëª…: ${q.note}`);
      }else{
        score -= 1;
        showResult(false, "ì˜¤ë‹µ âŒ", `ì„ íƒ: <b>${ppeLabel(choice)}</b><br/>ì •ë‹µ: <b>${ppeLabel(q.answer)}</b>`);
      }
      updateHUD();
    }

    function showResult(ok, title, bodyHtml){
      overlay.style.display = "flex";
      resultTitle.textContent = title;
      resultTitle.style.color = ok ? "var(--good)" : "var(--bad)";
      resultBody.innerHTML = bodyHtml;
    }

    function next(){
      overlay.style.display = "none";
      qIndex += 1;
      updateHUD();

      // ë‹¤ìŒ ë¼ìš´ë“œ ì¤€ë¹„
      falling.style.display = "none";
      slot.innerHTML = "ë‹¤ìŒ ì§ˆë³‘ëª…ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤â€¦";
      tLeftEl.textContent = TIME_LIMIT.toFixed(1);

      // ì ê¹ ì‰¬ê³  ì‹œì‘(ëŠë¦° í…œí¬)
      setTimeout(() => startRound(), 450);
    }

    function retry(){
      overlay.style.display = "none";
      // ê°™ì€ ë¬¸ì œ ë‹¤ì‹œ
      falling.style.display = "none";
      slot.innerHTML = "ë‹¤ì‹œ ë–¨ì–´ì§‘ë‹ˆë‹¤â€¦";
      tLeftEl.textContent = TIME_LIMIT.toFixed(1);
      setTimeout(() => startRound(), 450);
    }

    function finish(){
      running = false;
      clearTimer();
      falling.style.display = "none";
      overlay.style.display = "flex";
      resultTitle.textContent = "ì™„ë£Œ ğŸ‰";
      resultTitle.style.color = "var(--accent)";
      resultBody.innerHTML = `ì´ <b>${TOTAL}</b>ë¬¸í•­ ì™„ë£Œ!<br/>ìµœì¢… ì ìˆ˜: <b>${score}</b><br/><span style="color:rgba(234,240,255,.75);font-weight:800;">ë¦¬ì…‹ì„ ëˆ„ë¥´ë©´ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”.</span>`;
      nextBtn.textContent = "ì²˜ìŒìœ¼ë¡œ";
      againBtn.style.display = "none";
    }

    // ====== ì´ë²¤íŠ¸ ======
    startBtn.addEventListener("click", () => {
      nextBtn.textContent = "ë‹¤ìŒ";
      againBtn.style.display = "inline-block";
      startGame();
    }, {passive:true});

    resetBtn.addEventListener("click", () => resetGame(), {passive:true});

    nextBtn.addEventListener("click", () => {
      if(qIndex >= TOTAL){
        // ì™„ë£Œ í›„ "ì²˜ìŒìœ¼ë¡œ"
        againBtn.style.display = "inline-block";
        nextBtn.textContent = "ë‹¤ìŒ";
        resetGame();
      }else{
        next();
      }
    }, {passive:true});

    againBtn.addEventListener("click", () => retry(), {passive:true});

    // ì´ˆê¸°í™”
    resetGame();
  </script>
</body>
</html>
