<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>73ë³‘ë™ PPE êµìœ¡ìš© ê²Œì„</title>
  <style>
    :root{
      --bg1:#0b1020; --bg2:#101a3a;
      --card:rgba(255,255,255,.08);
      --line:rgba(255,255,255,.14);
      --ink:#ffffff; --muted:rgba(255,255,255,.75);
      --good:#22c55e; --bad:#ef4444;
      --pri1:#a855f7; --pri2:#7c3aed;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,"Noto Sans KR",sans-serif;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      color:var(--ink); min-height:100vh;
      display:flex; justify-content:center; padding:16px;
    }
    .app{width:min(520px,100%); border-radius:20px; overflow:hidden;
      border:1px solid var(--line); box-shadow:0 18px 60px rgba(0,0,0,.45);
      background:rgba(255,255,255,.04); backdrop-filter:blur(6px);
    }
    header{display:flex;justify-content:space-between;align-items:center;
      padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.10);
    }
    header .t{font-weight:900; letter-spacing:-.02em}
    header .s{font-size:12px; color:var(--muted)}
    .screen{padding:16px}
    .hide{display:none !important}

    .startCard{
      background: radial-gradient(1200px 400px at 50% 0%, rgba(168,85,247,0.35), rgba(255,255,255,0.04));
      border:1px solid rgba(255,255,255,0.14);
      border-radius:18px; padding:18px; text-align:center;
    }
    .logo{font-size:38px;font-weight:950;line-height:1.05;letter-spacing:-.06em;margin:6px 0 8px}
    .sub{color:var(--muted);font-size:14px;margin:0 0 14px}
    .btn{
      width:100%; border:none; border-radius:14px; padding:14px 14px;
      font-weight:900; font-size:16px; cursor:pointer; color:#fff;
      background:linear-gradient(180deg,var(--pri1),var(--pri2));
      box-shadow:0 10px 24px rgba(124,58,237,.35);
    }
    .btn:active{transform:translateY(1px)}
    .input{
      width:100%; margin-top:10px; padding:12px 12px; border-radius:14px;
      border:1px solid rgba(255,255,255,.18); background:rgba(0,0,0,.18);
      color:#fff; font-size:14px;
    }
    .row{display:flex; gap:10px; margin-top:10px}
    .row .input{flex:1}

    .hud{display:flex;gap:10px;justify-content:space-between;margin-bottom:12px}
    .chip{
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px; padding:8px 10px; font-size:12px; color:rgba(255,255,255,.92);
      display:inline-flex; gap:6px; align-items:center;
    }

    .card{
      background:#fff; color:#111827; border-radius:18px; padding:14px;
      border:1px solid #e5e7eb;
    }
    .qTitle{font-weight:950;font-size:18px;margin:2px 0 6px;letter-spacing:-.02em}
    .qDesc{color:#6b7280;font-size:14px;margin:0 0 10px;line-height:1.45}
    .scene{
      background:linear-gradient(180deg,#e9f2ff,#f6f8ff);
      border:1px solid #dbeafe; border-radius:16px;
      height:230px; display:flex; align-items:center; justify-content:center;
      position:relative; overflow:hidden;
    }
    .tag{
      position:absolute; top:12px; left:12px;
      background:rgba(17,24,39,.82); color:#fff;
      padding:6px 10px; font-size:12px; border-radius:999px;
    }
    .charBox{
      width:190px; height:190px; border-radius:18px;
      background:#fff; border:1px solid #e5e7eb;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      overflow:hidden;
    }
    .charBox img{width:100%;height:100%;object-fit:contain}
    .charFallback{
      width:140px;height:140px;border-radius:26px;background:#60a5fa;position:relative;
    }
    .charFallback:before{
      content:""; position:absolute; left:26px; top:42px;
      width:12px;height:12px;background:#111827;border-radius:3px;
      box-shadow: 58px 0 0 #111827;
    }
    .charFallback:after{
      content:""; position:absolute; left:34px; top:76px;
      width:72px;height:12px;background:#111827;border-radius:999px;opacity:.85;
    }

    .choices{margin-top:12px; display:grid; grid-template-columns:repeat(2,1fr); gap:10px}
    .pick{
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px; padding:12px 10px; color:#fff; font-weight:950;
      cursor:pointer; display:flex; flex-direction:column; gap:6px; align-items:center; justify-content:center;
      text-align:center; user-select:none;
    }
    .pick small{font-weight:800;color:rgba(255,255,255,.75)}
    .pick.on{outline:2px solid rgba(168,85,247,.9); background:rgba(168,85,247,.18)}
    .pick:active{transform:translateY(1px)}

    .result{
      margin-top:12px; padding:10px 12px; border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.18); color:rgba(255,255,255,.95);
      font-size:14px; display:none;
    }
    .result.ok{border-color:rgba(34,197,94,.45)}
    .result.no{border-color:rgba(239,68,68,.45)}
    .nextRow{margin-top:12px; display:flex; gap:10px}
    .ghost{
      flex:1; background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      border-radius:14px; padding:12px; color:#fff; font-weight:950; cursor:pointer;
    }
    .primary{
      flex:1; border:none; border-radius:14px; padding:12px;
      font-weight:950; cursor:pointer; color:#fff;
      background:linear-gradient(180deg,var(--pri1),var(--pri2));
    }
    .foot{margin-top:10px;font-size:12px;color:rgba(255,255,255,.72);text-align:center}
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div class="t">73ë³‘ë™ PPE ë¯¸ì…˜</div>
      <div class="s">êµìœ¡ìš© Â· 10ë¬¸í•­</div>
    </header>

    <!-- START -->
    <section class="screen" id="start">
      <div class="startCard">
        <div class="logo">PPE ì„ íƒ<br/>ë¯¸ì…˜</div>
        <p class="sub">ìƒí™©ì„ ì½ê³  PPEë¥¼ ì„ íƒí•˜ì„¸ìš” (ì •ë‹µ +10 / ì˜¤ë‹µ -5)</p>

        <input class="input" id="nick" placeholder="ë‹‰ë„¤ì„(ì‹¤ëª…X) ì˜ˆ: 73D-í™ê¸¸ë™" />
        <div class="row">
          <select class="input" id="shift">
            <option value="Day">Day</option>
            <option value="Evening">Evening</option>
            <option value="Night">Night</option>
          </select>
          <select class="input" id="retry">
            <option value="off">ì˜¤ë‹µ ì¬ì‹œë„: ì—†ìŒ</option>
            <option value="on">ì˜¤ë‹µ ì¬ì‹œë„: í—ˆìš©</option>
          </select>
        </div>

        <button class="btn" id="btnStart" style="margin-top:12px">START GAME</button>
        <div class="foot">â€» img.pngê°€ ìˆìœ¼ë©´ ìºë¦­í„°ë¡œ í‘œì‹œë©ë‹ˆë‹¤(ì—†ì–´ë„ ê²Œì„ ì§„í–‰ ê°€ëŠ¥)</div>
      </div>
    </section>

    <!-- GAME -->
    <section class="screen hide" id="game">
      <div class="hud">
        <div class="chip">ìŠ¤í…Œì´ì§€ <b id="stageNow">1</b>/10</div>
        <div class="chip">ì ìˆ˜ <b id="scoreNow">0</b></div>
      </div>

      <div class="card">
        <div class="qTitle" id="qTitle"></div>
        <div class="qDesc" id="qDesc"></div>
        <div class="scene">
          <div class="tag" id="qTag"></div>

          <div class="charBox">
            <img id="charImg" src="img.png?v=1" alt="" style="display:none"
                 onerror="this.style.display='none'; document.getElementById('charFallback').style.display='block';" />
            <div id="charFallback" class="charFallback"></div>
          </div>
        </div>
      </div>

      <div class="choices" id="choices"></div>

      <div class="result" id="resultBox"></div>

      <div class="nextRow">
        <button class="ghost" id="btnReset">ì²˜ìŒìœ¼ë¡œ</button>
        <button class="primary" id="btnNext">ë‹¤ìŒ</button>
      </div>

      <div class="foot" id="who"></div>
    </section>

    <!-- END -->
    <section class="screen hide" id="end">
      <div class="startCard">
        <div class="logo">ì™„ë£Œ ğŸ‰</div>
        <p class="sub" id="endText"></p>
        <button class="btn" id="btnRestart">ë‹¤ì‹œí•˜ê¸°</button>
      </div>
    </section>
  </div>

<script>
  // PPE 6ê°œ(êµìœ¡ìš© í‘œì¤€ ì„¸íŠ¸)
  const PPE = [
    {k:"ì¥ê°‘", sub:"ì²´ì•¡/ì ‘ì´‰"},
    {k:"ê°€ìš´", sub:"ì˜¤ì—¼/ì ‘ì´‰"},
    {k:"ìˆ˜ìˆ ë§ˆìŠ¤í¬", sub:"ë¹„ë§"},
    {k:"N95", sub:"ê³µê¸°"},
    {k:"ë³´ì•ˆê²½/í˜ì´ìŠ¤ì‰´ë“œ", sub:"íŠ€ê¹€"},
    {k:"PPE ë¶ˆí•„ìš”", sub:"ì†ìœ„ìƒ ì¤‘ì‹¬"}
  ];

  // 73ë³‘ë™ êµìœ¡ìš© 10ë¬¸í•­(ê¸°ë³¸ í‹€)
  // ë³‘ì›/ë¶€ì„œ ì§€ì¹¨ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆëŠ” ê²½ìš°, ë¯¸í¬ìŒ¤ ê¸°ì¤€ìœ¼ë¡œ ë¬¸í•­/ì •ë‹µë§Œ ë°”ê¿”ì„œ ë§ì¶°ì¤„ ìˆ˜ ìˆì–´.
  const Q = [
    { tag:"ê³µê¸°ì£¼ì˜", title:"íê²°í•µ ì˜ì‹¬ í™˜ì ë³‘ì‹¤ ì…ì‹¤",
      desc:"ê¸°ì¹¨/ê°ë‹´, ê³µê¸°ì£¼ì˜ ì˜ì‹¬. ê°€ê¹Œìš´ ê±°ë¦¬ì—ì„œ í™˜ì í‰ê°€.",
      ans:["N95"], exp:"ê³µê¸°ì£¼ì˜ ì˜ì‹¬ ì‹œ N95(ë™ê¸‰) ì°©ìš©ì´ ê¸°ë³¸ì…ë‹ˆë‹¤." },

    { tag:"ì ‘ì´‰ì£¼ì˜", title:"VRE í™˜ì ë“œë ˆì‹±",
      desc:"ì ‘ì´‰ì£¼ì˜(í™˜ì/í™˜ê²½ ì ‘ì´‰ ê°€ëŠ¥).",
      ans:["ì¥ê°‘","ê°€ìš´"], exp:"ì ‘ì´‰ì£¼ì˜ëŠ” ì¥ê°‘+ê°€ìš´ì´ ê¸°ë³¸ì…ë‹ˆë‹¤." },

    { tag:"ë¹„ë§ì£¼ì˜", title:"ì¸í”Œë£¨ì—”ì ì˜ì‹¬ í™˜ì ê°„í˜¸",
      desc:"ê¸°ì¹¨, ê°€ë˜. í™˜ì ê°€ê¹Œì´ ì ‘ê·¼.",
      ans:["ìˆ˜ìˆ ë§ˆìŠ¤í¬"], exp:"ë¹„ë§ì£¼ì˜ëŠ” ìˆ˜ìˆ ë§ˆìŠ¤í¬ê°€ ê¸°ë³¸ì…ë‹ˆë‹¤(íŠ€ê¹€ ìœ„í—˜ ì‹œ ì•„ì´ë³´í˜¸ ì¶”ê°€)." },

    { tag:"í‘œì¤€ì£¼ì˜", title:"í˜ˆì•¡ ì±„í˜ˆ",
      desc:"í˜ˆì•¡ ë…¸ì¶œ ê°€ëŠ¥. íŠ€ê¹€ì€ í¬ì§€ ì•ŠìŒ.",
      ans:["ì¥ê°‘"], exp:"í˜ˆì•¡/ì²´ì•¡ ë…¸ì¶œ ê°€ëŠ¥ ì‹œ ì¥ê°‘ì€ ê¸°ë³¸ì…ë‹ˆë‹¤." },

    { tag:"ì ‘ì´‰ì£¼ì˜", title:"CDI(ì„¤ì‚¬) í™˜ì ê¸°ì €ê·€ êµí™˜",
      desc:"ë¶„ë³€ ì˜¤ì—¼/í™˜ê²½ ì˜¤ì—¼ ìœ„í—˜ ë†’ìŒ.",
      ans:["ì¥ê°‘","ê°€ìš´"], exp:"ì ‘ì´‰ì£¼ì˜ ìƒí™©(ì˜¤ì—¼ ìœ„í—˜)ì—ì„œëŠ” ì¥ê°‘+ê°€ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤." },

    { tag:"ì—ì–´ë¡œì¡¸", title:"ì½”ë¡œë‚˜ ì˜ì‹¬ í™˜ì ë„¤ë¶ˆë¼ì´ì € ì‹œí–‰ ë³´ì¡°",
      desc:"ì—ì–´ë¡œì¡¸ ë°œìƒ ê°€ëŠ¥. í™˜ì ê°€ê¹Œì´ ìˆ˜í–‰.",
      ans:["N95","ì¥ê°‘","ê°€ìš´","ë³´ì•ˆê²½/í˜ì´ìŠ¤ì‰´ë“œ"],
      exp:"ì—ì–´ë¡œì¡¸ ìœ„í—˜ ì‹œ N95 + ì¥ê°‘/ê°€ìš´ + ëˆˆë³´í˜¸ë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤." },

    { tag:"í‘œì¤€ì£¼ì˜", title:"ì¼ë°˜ í™˜ì í™œë ¥ì§•í›„ ì¸¡ì •",
      desc:"ì²´ì•¡ ë…¸ì¶œ ì—†ê³  í™˜ì ì ‘ì´‰ ìµœì†Œ.",
      ans:["PPE ë¶ˆí•„ìš”"],
      exp:"ì²´ì•¡ ë…¸ì¶œì´ ì—†ë‹¤ë©´ PPE ì—†ì´ ì†ìœ„ìƒ ì¤‘ì‹¬(ê¸°ê´€ ì§€ì¹¨ì— ë”°ë¦„)ì…ë‹ˆë‹¤." },

    { tag:"íŠ€ê¹€ ìœ„í—˜", title:"ê°í˜ˆ/êµ¬í†  í™˜ì ì²˜ì¹˜",
      desc:"ì²´ì•¡ íŠ ê°€ëŠ¥ì„±ì´ ë†’ìŒ.",
      ans:["ì¥ê°‘","ê°€ìš´","ìˆ˜ìˆ ë§ˆìŠ¤í¬","ë³´ì•ˆê²½/í˜ì´ìŠ¤ì‰´ë“œ"],
      exp:"íŠ€ê¹€ ìœ„í—˜ì´ ë†’ìœ¼ë©´ ë§ˆìŠ¤í¬+ëˆˆë³´í˜¸+ê°€ìš´/ì¥ê°‘ì„ ê°•í™”í•©ë‹ˆë‹¤." },

    { tag:"ì ‘ì´‰ì£¼ì˜", title:"ê²©ë¦¬ë³‘ì‹¤ í™˜ê²½ ì²­ì†Œ(ì¹¨ìƒ ì£¼ë³€ ì •ë¦¬)",
      desc:"ì˜¤ì—¼ëœ í™˜ê²½ ì ‘ì´‰ ê°€ëŠ¥.",
      ans:["ì¥ê°‘","ê°€ìš´"], exp:"ì˜¤ì—¼ í™˜ê²½ ì ‘ì´‰ ì‹œ ì¥ê°‘+ê°€ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤." },

    { tag:"ê³µê¸°ì£¼ì˜", title:"ìˆ˜ë‘/í™ì—­ ì˜ì‹¬ í™˜ì ì ‘ì´‰",
      desc:"ê³µê¸° ì „íŒŒ ê°€ëŠ¥ ì§ˆí™˜ ì˜ì‹¬. ë³‘ì‹¤ ì¶œì….",
      ans:["N95"], exp:"í™ì—­/ìˆ˜ë‘ ë“± ê³µê¸°ì£¼ì˜ ì§ˆí™˜ì€ N95(ë™ê¸‰) ì°©ìš©ì´ ê¸°ë³¸ì…ë‹ˆë‹¤." },
  ];

  const $ = (id)=>document.getElementById(id);

  let idx=0, score=0, nick="", shift="", retryMode="off";
  let picked=new Set();
  let answered=false;
  let startedAt=0;

  function show(id){ $(id).classList.remove("hide"); }
  function hide(id){ $(id).classList.add("hide"); }

  function setChar(){
    // ìºì‹œ ë°©ì§€
    const img = $("charImg");
    img.style.display = "block";
    $("charFallback").style.display = "none";
    img.src = "img.png?v=" + Date.now();
  }

  function render(){
    const q = Q[idx];
    $("stageNow").textContent = String(idx+1);
    $("scoreNow").textContent = String(score);
    $("qTitle").textContent = q.title;
    $("qDesc").textContent = q.desc;
    $("qTag").textContent = q.tag;

    setChar();

    // ì„ íƒì§€
    const box = $("choices");
    box.innerHTML = "";
    picked = new Set();
    answered=false;

    PPE.forEach(p=>{
      const b = document.createElement("div");
      b.className = "pick";
      b.innerHTML = `<div>${p.k}</div><small>${p.sub}</small>`;
      b.onclick = ()=>{
        if(answered) return;
        // ë‹¤ì¤‘ì„ íƒ ê°€ëŠ¥(í•„ìš”í•œ ë§Œí¼ ì„ íƒ)
        if(picked.has(p.k)){
          picked.delete(p.k);
          b.classList.remove("on");
        }else{
          picked.add(p.k);
          b.classList.add("on");
        }
      };
      box.appendChild(b);
    });

    const r = $("resultBox");
    r.style.display="none";
    r.className="result";
    r.textContent="";
  }

  function sameSet(set, arr){
    if(set.size !== arr.length) return false;
    for(const x of arr) if(!set.has(x)) return false;
    return true;
  }

  function grade(){
    const q = Q[idx];
    const ok = sameSet(picked, q.ans);
    answered = true;

    if(ok) score += 10;
    else score = Math.max(0, score - 5);

    $("scoreNow").textContent = String(score);

    const r = $("resultBox");
    r.style.display="block";
    if(ok){
      r.className = "result ok";
      r.textContent = `ì •ë‹µ âœ…  +10ì   |  ${q.exp}`;
    }else{
      r.className = "result no";
      r.textContent = `ì˜¤ë‹µ âŒ  -5ì   |  ${q.exp}`;
    }

    return ok;
  }

  function next(){
    idx++;
    if(idx >= Q.length){
      const sec = Math.round((Date.now()-startedAt)/1000);
      hide("game");
      show("end");
      $("endText").textContent = `${nick} (${shift}) Â· ìµœì¢… ${score}ì  Â· ì†Œìš” ${sec}ì´ˆ`;
      return;
    }
    render();
  }

  $("btnStart").onclick = ()=>{
    nick = $("nick").value.trim();
    if(!nick){ alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì¤˜!"); $("nick").focus(); return; }
    shift = $("shift").value;
    retryMode = $("retry").value;

    hide("start"); hide("end");
    show("game");

    idx=0; score=0; startedAt=Date.now();
    $("who").textContent = `${nick} Â· ${shift} Â· 73ë³‘ë™`;
    render();
  };

  $("btnNext").onclick = ()=>{
    if(!answered){
      const ok = grade();
      if(!ok && retryMode === "on"){
        // ì˜¤ë‹µì´ì–´ë„ ì¬ì‹œë„ í—ˆìš©: answeredë¥¼ ë‹¤ì‹œ falseë¡œ ë§Œë“¤ì–´ ì„ íƒ ìœ ì§€ ê°€ëŠ¥í•˜ê²Œ
        answered = false;
        // í”¼ë“œë°±ì€ ë³´ì—¬ì£¼ë˜, ì¬ì„ íƒ ê°€ëŠ¥í•˜ê²Œ í•¨
        return;
      }
      // ì¬ì‹œë„ ì—†ìŒ or ì •ë‹µì´ë©´ ë‹¤ìŒ
      next();
      return;
    }
    // ì´ë¯¸ ì±„ì ëœ ìƒíƒœë©´ ë°”ë¡œ ë‹¤ìŒ
    next();
  };

  $("btnReset").onclick = ()=>{ location.reload(); };
  $("btnRestart").onclick = ()=>{ location.reload(); };

  // ì‹œì‘í™”ë©´ì—ì„œë„ img.png ìˆìœ¼ë©´ ë¯¸ë¦¬ í…ŒìŠ¤íŠ¸(ì—†ì–´ë„ ê´œì°®ìŒ)
  window.addEventListener("load", ()=>{
    const t = new Image();
    t.onload = ()=>{};
    t.onerror = ()=>{};
    t.src = "img.png?v=" + Date.now();
  });
</script>
</body>
</html>
