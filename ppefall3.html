<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</title>
  <style>
    :root{
      --bg1:#071022;
      --bg2:#020617;
      --card:rgba(255,255,255,.08);
      --card2:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.14);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --good:#22c55e;
      --bad:#ef4444;
      --btn:rgba(255,255,255,.08);
      --shadow: 0 18px 40px rgba(0,0,0,.45);
      --r:22px;
      --gap:12px;
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
    html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif; color:var(--text); }
    body{
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(100,140,255,.18), transparent 55%),
        radial-gradient(900px 600px at 100% 0%, rgba(80,255,210,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      padding: env(safe-area-inset-top) 12px env(safe-area-inset-bottom) 12px;
      display:flex;
      justify-content:center;
    }

    .app{
      width:min(520px, 100%);
      height: calc(100svh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      display:flex;
      flex-direction:column;
      gap: var(--gap);
      overflow:hidden;
    }

    /* --- TOP STATS (ì‘ê²Œ) --- */
    .top{
      display:grid;
      grid-template-columns: 1.25fr 1fr 1fr;
      gap: var(--gap);
    }

    .card{
      background: var(--card);
      border:1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .header-card{
      min-height:80px;
      padding:10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .titlewrap{ display:flex; flex-direction:column; gap:4px; }
    .title{
      font-size:18px;
      font-weight:800;
      letter-spacing:-0.3px;
      line-height:1.05;
    }
    .subtitle{
      font-size:12px;
      color:var(--muted);
      line-height:1.15;
    }
    .restart{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 999px;
      padding:8px 10px;
      font-weight:800;
      font-size:12px;
      cursor:pointer;
      touch-action:manipulation;
      white-space:nowrap;
    }
    .restart:active{ transform: translateY(1px); }

    .stat-card{
      min-height:80px;
      padding:10px 6px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:4px;
    }
    .stat-label{ font-size:12px; color:var(--muted); font-weight:700; }
    .stat-value{ font-size:26px; font-weight:900; letter-spacing:-0.5px; }

    /* --- INSTRUCTION (ì§§ê²Œ) --- */
    .inst{
      padding:12px 14px;
    }
    .inst h2{
      margin:0 0 6px 0;
      font-size:16px;
      font-weight:900;
      letter-spacing:-0.3px;
    }
    .inst p{
      margin:0;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    /* --- STATUS ROW --- */
    .status-row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
    }
    .pill{
      padding:10px 12px;
      min-height:48px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .pill .k{ color:var(--muted); font-size:12px; font-weight:800; display:flex; align-items:center; gap:8px; }
    .pill .v{ font-size:16px; font-weight:900; letter-spacing:-0.2px; }

    /* --- QUESTION BOX (í¬ê²Œ, ì¤‘ì•™, ì˜ ì•ˆì§¤ë¦¬ê²Œ) --- */
    .qbox{
      flex: 1 1 auto; /* ë‚¨ëŠ” ë†’ì´ ìš°ì„  ë°°ì • */
      min-height: 170px;
      padding: 14px;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }
    .drop-area{
      position:relative;
      width:100%;
      height: 100%;
      border-radius: var(--r);
      border:2px dashed rgba(255,255,255,.22);
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* ë–¨ì–´ì§€ëŠ” í…ìŠ¤íŠ¸ ë°•ìŠ¤ */
    .drop-item{
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      width: min(92%, 420px);
      padding: 16px 14px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      box-shadow: 0 10px 26px rgba(0,0,0,.35);
      text-align:center;
      font-weight: 950;
      letter-spacing: -0.6px;
      font-size: clamp(18px, 4.8vw, 28px);
      line-height: 1.2;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      text-shadow: 0 2px 18px rgba(0,0,0,.55);
      will-change: top;
    }

    /* ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œëŠ” "ì§§ê²Œ" */
    .result-badge{
      position:absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      font-weight: 950;
      font-size: 20px;
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.16);
      display:none;
      align-items:center;
      gap:10px;
    }
    .result-badge.good{ color: var(--good); }
    .result-badge.bad{ color: var(--bad); }

    /* --- PPE --- */
    .ppe-wrap{
      flex: 0 0 auto;
      padding: 12px 14px 14px 14px;
    }
    .ppe-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .ppe-head .h{
      font-size:16px;
      font-weight:950;
      letter-spacing:-0.4px;
    }
    .ppe-head .s{
      font-size:12px;
      color: var(--muted);
      font-weight:800;
    }

    .ppe-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .ppe-btn{
      height: clamp(64px, 10svh, 84px);
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      box-shadow: 0 14px 30px rgba(0,0,0,.35);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 4px;
      cursor:pointer;
      touch-action:manipulation;
      user-select:none;
    }
    .ppe-btn:active{ transform: translateY(1px); }
    .ppe-btn .t{ font-weight:950; font-size:18px; letter-spacing:-0.4px; }
    .ppe-btn .d{ font-weight:800; font-size:12px; color: var(--muted); }

    .footer-note{
      margin-top:10px;
      font-size:11px;
      color: rgba(234,240,255,.60);
      text-align:center;
      font-weight:700;
    }

    /* ì‘ì€ í™”ë©´ì—ì„œ ë„ˆë¬´ ë‹µë‹µí•˜ë©´ ë” ì¤„ì„ */
    @media (max-height: 760px){
      .inst{ padding:10px 12px; }
      .qbox{ min-height: 150px; padding: 12px; }
      .stat-value{ font-size:24px; }
      .title{ font-size:17px; }
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- TOP -->
    <div class="top">
      <div class="card header-card">
        <div class="titlewrap">
          <div class="title">ğŸ§¹ í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</div>
          <div class="subtitle">ê¸°ë³¸ 4ì¢… Â· ì§ˆë³‘ëª… ë‚™í•˜</div>
        </div>
        <button class="restart" id="btnRestart">â†» ì¬ì‹œì‘</button>
      </div>

      <div class="card stat-card">
        <div class="stat-label">ë¬¸í•­</div>
        <div class="stat-value"><span id="qNow">1</span>/<span id="qTotal">10</span></div>
      </div>

      <div class="card stat-card">
        <div class="stat-label">ì ìˆ˜</div>
        <div class="stat-value" id="score">0</div>
      </div>
    </div>

    <!-- INSTRUCTION (ì§§ê²Œ) -->
    <div class="card inst">
      <h2>ì§ˆë³‘/ìƒí™©ì„ ë³´ê³  í•„ìš”í•œ PPE 1ê°œë¥¼ ê³ ë¥´ì„¸ìš”</h2>
      <p>ì§ˆë³‘ëª…ì´ ë°•ìŠ¤ ìœ„ì—ì„œ ì•„ë˜ë¡œ <b>5ì´ˆ</b> ë™ì•ˆ ë‚´ë ¤ì˜µë‹ˆë‹¤. ì•„ë˜ PPEë¥¼ ëˆ„ë¥´ë©´ ìë™ ì±„ì  í›„ ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</p>
    </div>

    <!-- STATUS -->
    <div class="status-row">
      <div class="card pill">
        <div class="k">â³ ì œí•œì‹œê°„</div>
        <div class="v"><span id="timeLeft">5.0</span>s</div>
      </div>
      <div class="card pill">
        <div class="k">ìƒíƒœ</div>
        <div class="v" id="state">ì§„í–‰</div>
      </div>
    </div>

    <!-- QUESTION -->
    <div class="card qbox">
      <div class="drop-area" id="dropArea">
        <div class="drop-item" id="dropItem">ì¤€ë¹„ì¤‘...</div>
        <div class="result-badge" id="resultBadge">ì •ë‹µ âœ…</div>
      </div>
    </div>

    <!-- PPE -->
    <div class="card ppe-wrap">
      <div class="ppe-head">
        <div class="h">ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</div>
        <div class="s">í•œ ë¬¸ì œë‹¹ 1ê°œë§Œ ì„ íƒ</div>
      </div>

      <div class="ppe-grid">
        <div class="ppe-btn" data-choice="mask">
          <div class="t">ë§ˆìŠ¤í¬</div>
          <div class="d">ê¸°ë³¸(ë¹„ë§/ë¶„ë¬´)</div>
        </div>
        <div class="ppe-btn" data-choice="n95">
          <div class="t">N95 ë§ˆìŠ¤í¬</div>
          <div class="d">ê³µê¸°(ê²°í•µ ë“±)</div>
        </div>
        <div class="ppe-btn" data-choice="gown">
          <div class="t">ê°€ìš´+ì¥ê°‘</div>
          <div class="d">ì ‘ì´‰(ì˜¤ì—¼ë¬¼ ì²˜ë¦¬)</div>
        </div>
        <div class="ppe-btn" data-choice="none">
          <div class="t">PPE ë¶ˆí•„ìš”</div>
          <div class="d">ìœ„í—˜ ë‚®ìŒ(êµìœ¡ìš©)</div>
        </div>
      </div>

      <div class="footer-note">â€» êµìœ¡ìš© ë‹¨ìˆœí™” ë²„ì „ (í‘œì¤€ì£¼ì˜+ì¶”ê°€ì£¼ì˜ ê°œë… ê¸°ë°˜)</div>
    </div>

  </div>

<script>
/** =========================
 *  ì„¤ì • (í•µì‹¬)
 * ========================= */
const FALL_SECONDS = 5.0;          // ë–¨ì–´ì§€ëŠ” ì‹œê°„ = ì œí•œì‹œê°„
const NEXT_DELAY_MS = 650;         // ì •ë‹µ/ì˜¤ë‹µ í‘œì‹œ í›„ ë‹¤ìŒë¬¸ì œ ë„˜ì–´ê°€ê¸°
const AUTO_START = true;           // ì‹œì‘ë²„íŠ¼ ì—†ì´ ìë™ ì‹œì‘

/** =========================
 *  ë¬¸ì œ ë°ì´í„°
 *  - ì—¬ê¸°ë§Œ ë°”ê¾¸ë©´ ë¬¸í•­ êµì²´ ê°€ëŠ¥
 *  - answer: "mask" | "n95" | "gown" | "none"
 * ========================= */
const QUESTIONS = [
  { text: "ì¸í”Œë£¨ì—”ì í™˜ì êµ¬ì—­ ì²­ì†Œ", answer: "mask" },
  { text: "ê²°í•µ ë³‘ì‹¤ ì²­ì†Œ", answer: "n95" },
  { text: "VRE/CRE ì¥ê¸° ì¬ì‹¤ ë³‘ì‹¤ í‡´ì‹¤ í›„ ì²­ì†Œ", answer: "gown" },
  { text: "í˜ˆì•¡/ì²´ì•¡ ì†ŒëŸ‰ ì˜¤ì—¼(í‘œë©´ ë‹¦ê¸°)", answer: "gown" },
  { text: "ì¼ë°˜ ì‚¬ë¬´ê³µê°„(ì˜¤ì—¼ ì—†ìŒ)", answer: "none" },
  { text: "CDI ì˜ì‹¬ í™˜ì ì£¼ë³€ í™˜ê²½ ì²­ì†Œ", answer: "gown" },
  { text: "í™ì—­/ìˆ˜ë‘ í™˜ì ê³µê°„ ì²­ì†Œ", answer: "n95" },
  { text: "ê¸°ì¹¨/ê°€ë˜ ë§ì€ í™˜ì ì£¼ë³€ ì²­ì†Œ", answer: "mask" },
  { text: "êµìœ¡ìš© ì¥ë¹„ ì •ë¦¬(í™˜ì ì ‘ì´‰ ì—†ìŒ)", answer: "none" },
  { text: "ì ‘ì´‰ì£¼ì˜ ë³‘ì‹¤(ë‹¤ì œë‚´ì„±ê· ) ë°”ë‹¥/ì¹¨ìƒ ì£¼ë³€ ì²­ì†Œ", answer: "gown" },
];

/** =========================
 *  DOM
 * ========================= */
const qNowEl = document.getElementById("qNow");
const qTotalEl = document.getElementById("qTotal");
const scoreEl = document.getElementById("score");
const timeLeftEl = document.getElementById("timeLeft");
const stateEl = document.getElementById("state");

const dropArea = document.getElementById("dropArea");
const dropItem = document.getElementById("dropItem");
const resultBadge = document.getElementById("resultBadge");

const btnRestart = document.getElementById("btnRestart");
const ppeButtons = Array.from(document.querySelectorAll(".ppe-btn"));

qTotalEl.textContent = String(QUESTIONS.length);

/** =========================
 *  ìƒíƒœ
 * ========================= */
let idx = 0;
let score = 0;
let running = false;
let answered = false;

let startTs = 0;
let rafId = 0;

/** =========================
 *  UI helpers
 * ========================= */
function setState(text){
  stateEl.textContent = text;
}
function setScore(v){
  score = v;
  scoreEl.textContent = String(score);
}
function setQuestionNo(){
  qNowEl.textContent = String(idx + 1);
}
function showBadge(isCorrect){
  resultBadge.style.display = "flex";
  resultBadge.classList.toggle("good", isCorrect);
  resultBadge.classList.toggle("bad", !isCorrect);
  resultBadge.textContent = isCorrect ? "ì •ë‹µ âœ…" : "ì˜¤ë‹µ âŒ";
}
function hideBadge(){
  resultBadge.style.display = "none";
}

/** =========================
 *  í•µì‹¬: ë–¨ì–´ì§€ê¸°(5ì´ˆ)
 *  - ë°•ìŠ¤ ìœ„(ì•½ -10%)ì—ì„œ ì‹œì‘ -> ì•„ë˜(ì•½ 80%)ê¹Œì§€ ì´ë™
 * ========================= */
function animate(ts){
  if(!running) return;

  if(!startTs) startTs = ts;
  const elapsed = (ts - startTs) / 1000;
  const t = Math.min(elapsed / FALL_SECONDS, 1);

  // ìœ„ì¹˜: -10% -> 78%
  const topPct = (-10 + (88 * t));
  dropItem.style.top = topPct + "%";

  // ë‚¨ì€ ì‹œê°„ í‘œì‹œ
  const left = Math.max(FALL_SECONDS - elapsed, 0);
  timeLeftEl.textContent = left.toFixed(1);

  // ì‹œê°„ ì´ˆê³¼ -> ì˜¤ë‹µ ì²˜ë¦¬
  if(left <= 0 && !answered){
    grade(null); // ì„ íƒ ì—†ìŒ
    return;
  }

  rafId = requestAnimationFrame(animate);
}

/** =========================
 *  ë¬¸ì œ ì‹œì‘
 * ========================= */
function startQuestion(){
  answered = false;
  running = true;
  startTs = 0;
  hideBadge();

  setQuestionNo();
  setState("ì§„í–‰");
  timeLeftEl.textContent = FALL_SECONDS.toFixed(1);

  // í…ìŠ¤íŠ¸ ì ìš© (ë„ˆë¬´ ê¸¸ë©´ â€¦ ì²˜ë¦¬)
  const q = QUESTIONS[idx];
  dropItem.textContent = q.text;

  // ì‹œì‘ ìœ„ì¹˜
  dropItem.style.top = "-10%";

  cancelAnimationFrame(rafId);
  rafId = requestAnimationFrame(animate);
}

/** =========================
 *  ì±„ì  + ë‹¤ìŒ ë¬¸ì œ ìë™
 *  - ì •ë‹µ/ì˜¤ë‹µ ì•„ë˜ â€œê¸´ ì„¤ëª…ê¸€â€ ì—†ìŒ (ìš”ì²­ ë°˜ì˜)
 * ========================= */
function grade(choice){
  if(answered) return;
  answered = true;
  running = false;
  cancelAnimationFrame(rafId);

  const correct = QUESTIONS[idx].answer;
  const isCorrect = (choice === correct);

  setState(isCorrect ? "ì •ë‹µ" : "ì˜¤ë‹µ");
  showBadge(isCorrect);

  if(isCorrect) setScore(score + 1);

  // ë‹¤ìŒ ë¬¸ì œ / ì¢…ë£Œ
  setTimeout(() => {
    hideBadge();
    idx++;
    if(idx >= QUESTIONS.length){
      setState("ì™„ë£Œ");
      timeLeftEl.textContent = "0.0";
      dropItem.textContent = "ì™„ë£Œ!";
      dropItem.style.top = "35%";
      return;
    }
    startQuestion();
  }, NEXT_DELAY_MS);
}

/** =========================
 *  ì´ë²¤íŠ¸
 * ========================= */
ppeButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    if(answered) return;
    const choice = btn.dataset.choice;
    grade(choice);
  }, { passive:true });
});

btnRestart.addEventListener("click", () => {
  restart();
});

function restart(){
  cancelAnimationFrame(rafId);
  idx = 0;
  setScore(0);
  hideBadge();
  if(AUTO_START){
    startQuestion();
  }else{
    running = false;
    setState("ëŒ€ê¸°");
    timeLeftEl.textContent = FALL_SECONDS.toFixed(1);
    dropItem.textContent = "ì‹œì‘ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”";
    dropItem.style.top = "35%";
  }
}

/** ìë™ ì‹œì‘ */
window.addEventListener("load", () => {
  if(AUTO_START){
    restart();
  }
});
</script>
</body>
</html>
