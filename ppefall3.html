<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</title>
  <style>
    :root{
      --bg:#071022;
      --card:rgba(255,255,255,.07);
      --stroke:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.68);
      --good:#22c55e;
      --bad:#ef4444;
      --r:22px;
      --shadow:0 18px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:radial-gradient(1200px 800px at 30% 10%, rgba(90,140,255,.18), transparent 60%),
                 radial-gradient(900px 700px at 80% 30%, rgba(34,197,94,.10), transparent 55%),
                 var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      overflow:hidden; /* âœ… ìŠ¤í¬ë¡¤ë¡œ ë ˆì´ì•„ì›ƒ ê¹¨ì§€ëŠ” ê²ƒ ë°©ì§€ */
    }

    /* âœ… ëª¨ë°”ì¼ì—ì„œ ì£¼ì†Œì°½ ë³€í™”ì—ë„ ì•ˆì •ì ì¸ ì‹¤ì œ í™”ë©´ ë†’ì´ */
    .app{
      height:100svh;                 /* í•µì‹¬ */
      padding:16px 14px calc(10px + env(safe-area-inset-bottom));
      display:flex;
      justify-content:center;
    }
    .wrap{
      width:min(520px, 100%);
      height:100%;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .topRow{
      display:grid;
      grid-template-columns: 1.2fr .7fr .7fr;
      gap:10px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:14px 14px;
      backdrop-filter: blur(10px);
    }
    .title{
      display:flex; align-items:flex-start; gap:10px;
    }
    .broom{font-size:18px; line-height:1}
    .t1{font-weight:800; font-size:18px; letter-spacing:-.02em}
    .t2{margin-top:6px; color:var(--muted); font-size:12px}
    .miniBtn{
      margin-left:auto;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      color:var(--text);
      border-radius:999px;
      padding:8px 10px;
      font-size:12px;
      cursor:pointer;
    }
    .stat{
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      gap:6px;
      text-align:center;
    }
    .stat .label{font-size:12px; color:var(--muted)}
    .stat .value{font-size:28px; font-weight:900; letter-spacing:-.02em}

    .hint{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .hint h2{
      margin:0;
      font-size:18px;
      letter-spacing:-.02em;
    }
    .hint ol{
      margin:0;
      padding-left:18px;
      color:var(--muted);
      font-size:13px;
      line-height:1.45;
    }

    .midRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .pill{
      display:flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.05);
      font-size:14px;
      font-weight:700;
      color:var(--text);
    }
    .pill .mut{color:var(--muted); font-weight:600}
    .pill .big{font-variant-numeric:tabular-nums; font-size:16px}

    /* âœ… ë¬¸ì œ ë°•ìŠ¤ëŠ” ë‚¨ëŠ” ê³µê°„ì„ ìµœëŒ€í•œ ë¨¹ê²Œ */
    .gameBox{
      flex:1;                         /* í•µì‹¬ */
      min-height:240px;               /* ë„ˆë¬´ ì‘ì•„ì§€ëŠ” ê²ƒ ë°©ì§€ */
      background:rgba(0,0,0,.10);
      border:2px dashed rgba(255,255,255,.14);
      border-radius:var(--r);
      position:relative;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .drop{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:-20%;
      width:min(92%, 460px);
      text-align:center;
      padding:16px 14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.08);
      box-shadow:0 10px 28px rgba(0,0,0,.35);
      font-weight:900;
      /* âœ… ì§ˆë³‘ ê¸€ì”¨ ë„ˆë¬´ ì»¤ì„œ ì˜ë¦¬ë˜ ë¬¸ì œ í•´ê²° */
      font-size:clamp(18px, 4.6vw, 30px);
      letter-spacing:-.03em;
      line-height:1.15;
      white-space:normal;
      word-break:keep-all;
      padding-inline:18px;
    }

    /* âœ… ì •ë‹µ/ì˜¤ë‹µì€ ì§§ê²Œë§Œ */
    .result{
      position:absolute;
      inset:auto 12px 12px 12px;
      border-radius:16px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.22);
      display:none;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .result .badge{
      font-weight:900;
      font-size:18px;
      letter-spacing:-.02em;
    }
    .result .ans{
      font-size:13px;
      color:var(--muted);
      font-weight:700;
    }

    /* âœ… í•˜ë‹¨ ë³´í˜¸êµ¬ ì˜ì—­ì€ í•­ìƒ í™”ë©´ì— â€œë¶™ì–´ìˆê²Œ(sticky)â€ */
    .bottom{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:12px 12px calc(12px + env(safe-area-inset-bottom));
      backdrop-filter: blur(10px);
    }
    .bottomTop{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .bottomTop .left{
      font-size:18px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .bottomTop .right{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .opt{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      border-radius:18px;
      padding:14px 12px;
      text-align:center;
      cursor:pointer;
      user-select:none;
      min-height:78px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:6px;
    }
    .opt .k{
      font-weight:900;
      font-size:18px;
      letter-spacing:-.02em;
    }
    .opt .d{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
    }
    .opt:active{transform:scale(.99)}
    .foot{
      margin-top:10px;
      text-align:center;
      font-size:12px;
      color:rgba(234,240,255,.55);
      font-weight:700;
    }

    /* âœ… ì‘ì€ í°ì—ì„œ ë„ˆë¬´ ë¹½ë¹½í•˜ë©´ ì‚´ì§ ì¤„ì„ */
    @media (max-height: 740px){
      .t1{font-size:16px}
      .stat .value{font-size:26px}
      .hint h2{font-size:17px}
      .gameBox{min-height:210px}
      .opt{min-height:72px}
      .opt .k{font-size:17px}
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="wrap">
      <div class="topRow">
        <div class="card title">
          <div class="broom">ğŸ§¹</div>
          <div>
            <div class="t1">í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</div>
            <div class="t2">ê¸°ë³¸ 4ì¢… Â· ì§ˆë³‘ëª… ë‚™í•˜</div>
          </div>
          <button class="miniBtn" id="restartBtn">â†» ì¬ì‹œì‘</button>
        </div>

        <div class="card stat">
          <div class="label">ë¬¸í•­</div>
          <div class="value"><span id="qNow">1</span>/<span id="qTotal">10</span></div>
        </div>

        <div class="card stat">
          <div class="label">ì ìˆ˜</div>
          <div class="value" id="score">0</div>
        </div>
      </div>

      <div class="card hint">
        <h2>ì§ˆë³‘/ìƒí™©ì„ ë³´ê³  í•„ìš”í•œ PPE 1ê°œë¥¼ ê³ ë¥´ì„¸ìš”</h2>
        <ol>
          <li>ì§ˆë³‘ëª…ì´ ë°•ìŠ¤ ì•ˆì—ì„œ ì•„ë˜ë¡œ <b>5ì´ˆ</b> ë™ì•ˆ ë‚´ë ¤ì˜µë‹ˆë‹¤. (ì‹œê°„ ì´ˆê³¼ ì‹œ ì˜¤ë‹µ)</li>
          <li>ì•„ë˜ì—ì„œ PPE 1ê°œë¥¼ ëˆ„ë¥´ë©´ ìë™ ì±„ì  í›„ ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</li>
        </ol>
      </div>

      <div class="midRow">
        <div class="pill"><span class="mut">â³ ì œí•œì‹œê°„</span> <span class="big" id="timeLeft">5.0s</span></div>
        <div class="pill"><span class="mut">ìƒíƒœ</span> <span class="big" id="state">ëŒ€ê¸°</span></div>
      </div>

      <div class="gameBox" id="gameBox">
        <div class="drop" id="drop">ë¡œë”©â€¦</div>

        <div class="result" id="resultBar">
          <div class="badge" id="resultBadge">ì •ë‹µ âœ…</div>
          <div class="ans" id="resultAns">ì •ë‹µ: ë§ˆìŠ¤í¬</div>
        </div>
      </div>

      <div class="bottom">
        <div class="bottomTop">
          <div class="left">ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</div>
          <div class="right">í•œ ë¬¸ì œë‹¹ 1ê°œë§Œ ì„ íƒ</div>
        </div>
        <div class="grid" id="options">
          <div class="opt" data-key="mask">
            <div class="k">ë§ˆìŠ¤í¬</div>
            <div class="d">ê¸°ë³¸(ë¹„ë§/ë¶„ë¬´)</div>
          </div>
          <div class="opt" data-key="n95">
            <div class="k">N95 ë§ˆìŠ¤í¬</div>
            <div class="d">ê³µê¸°(ê²°í•µ ë“±)</div>
          </div>
          <div class="opt" data-key="gown">
            <div class="k">ê°€ìš´+ì¥ê°‘</div>
            <div class="d">ì ‘ì´‰(ì˜¤ì—¼ë¬¼ ì²˜ë¦¬)</div>
          </div>
          <div class="opt" data-key="none">
            <div class="k">PPE ë¶ˆí•„ìš”</div>
            <div class="d">ìœ„í—˜ ë‚®ìŒ(êµìœ¡ìš©)</div>
          </div>
        </div>
        <div class="foot">â€» êµìœ¡ìš© ë‹¨ìˆœí™” ë²„ì „(í‘œì¤€ì£¼ì˜+ì¶”ê°€ì£¼ì˜ ê°œë… ê¸°ë°˜)</div>
      </div>
    </div>
  </div>

  <script>
    // ====== ë¬¸ì œ(ì˜ˆì‹œ) ======
    // ì›í•˜ëŠ” ë¬¸í•­ìœ¼ë¡œ ë°”ê¿”ë„ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ ë™ì‘í•¨
    const QUESTIONS = [
      { text: "ì¸í”Œë£¨ì—”ì í™˜ì êµ¬ì—­ ì²­ì†Œ", answer: "mask" },
      { text: "ê²°í•µ ë³‘ì‹¤ ì²­ì†Œ", answer: "n95" },
      { text: "VRE/CRE ì¥ê¸° ì¬ì‹¤ ë³‘ì‹¤ í‡´ì‹¤ í›„ ì²­ì†Œ", answer: "gown" },
      { text: "í˜ˆì•¡/ì²´ì•¡ ì˜¤ì—¼ë¬¼ ì²˜ë¦¬(ì†ŒëŸ‰)", answer: "gown" },
      { text: "ì¼ë°˜ êµ¬ì—­ ë°”ë‹¥ ì²­ì†Œ(ì˜¤ì—¼ ì—†ìŒ)", answer: "none" },
      { text: "ë¶„ë¬´ ì†Œë… ì‘ì—…(ë¹„ë§/ë¶„ë¬´)", answer: "mask" },
      { text: "í˜¸í¡ê¸° ì¦ìƒ í™˜ì ëŒ€ê¸°ê³µê°„ ì²­ì†Œ", answer: "mask" },
      { text: "ê³µê¸°ì£¼ì˜ ê²©ë¦¬ì‹¤ í™˜ê²½ì •ë¦¬", answer: "n95" },
      { text: "ì ‘ì´‰ì£¼ì˜ ë³‘ì‹¤ ì¹¨ìƒ ì£¼ë³€ ì²­ì†Œ", answer: "gown" },
      { text: "êµìœ¡ìš© ì˜ˆì‹œ(ìœ„í—˜ ë‚®ìŒ)", answer: "none" },
    ];

    // ====== ìƒíƒœ ======
    const total = QUESTIONS.length;
    let idx = 0;
    let score = 0;
    let running = false;
    let locked = false;
    let timer = null;
    let startAt = 0;
    const DURATION = 5000; // âœ… 5ì´ˆ ê³ ì •

    // ====== DOM ======
    const qNow = document.getElementById("qNow");
    const qTotal = document.getElementById("qTotal");
    const scoreEl = document.getElementById("score");
    const timeLeftEl = document.getElementById("timeLeft");
    const stateEl = document.getElementById("state");
    const dropEl = document.getElementById("drop");
    const gameBox = document.getElementById("gameBox");
    const resultBar = document.getElementById("resultBar");
    const resultBadge = document.getElementById("resultBadge");
    const resultAns = document.getElementById("resultAns");
    const restartBtn = document.getElementById("restartBtn");

    qTotal.textContent = total;

    function keyToName(k){
      if(k==="mask") return "ë§ˆìŠ¤í¬";
      if(k==="n95") return "N95 ë§ˆìŠ¤í¬";
      if(k==="gown") return "ê°€ìš´+ì¥ê°‘";
      if(k==="none") return "PPE ë¶ˆí•„ìš”";
      return k;
    }

    function resetUI(){
      resultBar.style.display = "none";
      dropEl.style.top = "-20%";
      dropEl.style.opacity = "1";
      timeLeftEl.textContent = "5.0s";
      stateEl.textContent = "ëŒ€ê¸°";
    }

    function stopTimer(){
      if(timer){ cancelAnimationFrame(timer); timer = null; }
    }

    function setDropPosition(progress){
      // progress: 0 -> 1
      // ë°•ìŠ¤ ì•ˆì—ì„œ ì˜ë¦¬ì§€ ì•Šë„ë¡ top ë²”ìœ„ë¥¼ ì œí•œ
      const topMin = -18;   // %
      const topMax = 68;    // % (ì•„ë˜ë¡œ ë„ˆë¬´ ë‚´ë ¤ê°€ë©´ ë³´í˜¸êµ¬ë‘ ê²¹ì³ ë³´ì¼ ìˆ˜ ìˆìŒ)
      const top = topMin + (topMax - topMin) * progress;
      dropEl.style.top = top + "%";
    }

    function startQuestion(){
      locked = false;
      running = true;
      resultBar.style.display = "none";

      qNow.textContent = (idx + 1);
      const q = QUESTIONS[idx];
      dropEl.textContent = q.text;

      stateEl.textContent = "ì§„í–‰";
      startAt = performance.now();
      setDropPosition(0);

      // ì• ë‹ˆë©”ì´ì…˜/íƒ€ì´ë¨¸
      stopTimer();
      const tick = (t) => {
        const elapsed = t - startAt;
        const remain = Math.max(0, DURATION - elapsed);
        const p = Math.min(1, elapsed / DURATION);

        setDropPosition(p);
        timeLeftEl.textContent = (remain/1000).toFixed(1) + "s";

        if(elapsed >= DURATION){
          // ì‹œê°„ì´ˆê³¼ = ì˜¤ë‹µ ì²˜ë¦¬ í›„ ìë™ ë‹¤ìŒ
          handleAnswer(null, true);
          return;
        }
        timer = requestAnimationFrame(tick);
      };
      timer = requestAnimationFrame(tick);
    }

    function showResult(ok, correctKey){
      resultBar.style.display = "flex";
      if(ok){
        resultBadge.textContent = "ì •ë‹µ âœ…";
        resultBadge.style.color = getComputedStyle(document.documentElement).getPropertyValue('--good');
      }else{
        resultBadge.textContent = "ì˜¤ë‹µ âŒ";
        resultBadge.style.color = getComputedStyle(document.documentElement).getPropertyValue('--bad');
      }
      resultAns.textContent = "ì •ë‹µ: " + keyToName(correctKey);
    }

    function handleAnswer(selectedKey, timeout=false){
      if(locked) return;
      locked = true;
      stopTimer();

      const correct = QUESTIONS[idx].answer;
      const ok = (!timeout && selectedKey === correct);

      if(ok) score += 1;
      scoreEl.textContent = score;

      showResult(ok, correct);
      stateEl.textContent = ok ? "ì •ë‹µ" : "ì˜¤ë‹µ";

      // ë‹¤ìŒ ë¬¸ì œ ìë™
      setTimeout(() => {
        idx += 1;
        if(idx >= total){
          stateEl.textContent = "ì™„ë£Œ";
          timeLeftEl.textContent = "0.0s";
          running = false;
          // ë§ˆì§€ë§‰ë„ ê²°ê³¼ëŠ” ë‚¨ê²¨ë‘ê³ , dropì€ ìœ„ë¡œ ì˜¬ë ¤ì„œ ì •ë¦¬
          dropEl.style.top = "-20%";
          dropEl.style.opacity = "0.2";
          return;
        }
        startQuestion();
      }, 750);
    }

    // ì˜µì…˜ í´ë¦­
    document.getElementById("options").addEventListener("click", (e) => {
      const btn = e.target.closest(".opt");
      if(!btn) return;
      if(!running) return;
      handleAnswer(btn.dataset.key, false);
    });

    // ì¬ì‹œì‘
    function restart(){
      stopTimer();
      idx = 0;
      score = 0;
      scoreEl.textContent = "0";
      resetUI();
      startQuestion(); // âœ… ì‹œì‘ ë²„íŠ¼ ì—†ì´ ìë™ ì‹œì‘
    }
    restartBtn.addEventListener("click", restart);

    // ì²« ë¡œë“œ ìë™ ì‹œì‘
    window.addEventListener("load", () => {
      restart();
    });

    // ëª¨ë°”ì¼ ì£¼ì†Œì°½ ë³€í™” ë“±ìœ¼ë¡œ ë†’ì´ ë°”ë€Œë©´ drop ìœ„ì¹˜ íŠ€ëŠ” ê²ƒì„ ìµœì†Œí™”
    window.addEventListener("resize", () => {
      // ê·¸ëƒ¥ í˜„ì¬ ì§„í–‰ ìœ ì§€ (ì—¬ê¸°ì„œ ê°•ì œ ì¬ê³„ì‚° ì•ˆ í•´ë„ svhê°€ ëŒ€ë¶€ë¶„ í•´ê²°)
    });
  </script>
</body>
</html>
