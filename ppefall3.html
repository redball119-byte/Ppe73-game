<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ (ê¸°ë³¸ 4ì¢… Â· ì§ˆë³‘ëª… ë‚™í•˜)</title>
  <style>
    :root{
      --bg:#071022;
      --card:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.14);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.7);
      --good:#22c55e;
      --bad:#ef4444;
      --btn:rgba(255,255,255,.10);
      --btn2:rgba(255,255,255,.16);
      --shadow: 0 18px 40px rgba(0,0,0,.45);
      --r:22px;
      --gap:12px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 50% 0%, rgba(255,255,255,.10), transparent 55%),
                  radial-gradient(900px 500px at 0% 30%, rgba(59,130,246,.18), transparent 55%),
                  radial-gradient(900px 500px at 100% 30%, rgba(34,197,94,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      -webkit-tap-highlight-color: transparent;
      overflow:hidden;
    }

    /* âœ… ì „ì²´ë¥¼ 1í™”ë©´ì— ê³ ì •: "ìƒë‹¨ + ê²Œì„ë°•ìŠ¤ + ì„ íƒì˜ì—­" 3ë‹¨ */
    .app{
      height:100dvh;
      padding: 14px 14px calc(14px + env(safe-area-inset-bottom));
      display:flex;
      flex-direction:column;
      gap: var(--gap);
      max-width: 520px;
      margin: 0 auto;
    }

    .row{
      display:flex;
      gap: var(--gap);
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .top .card{
      flex:1;
      padding: 12px 14px;
      min-height: 64px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .title{
      font-weight:800;
      letter-spacing:-.3px;
      line-height:1.1;
      font-size: 16px;
    }
    .sub{
      margin-top:4px;
      color: var(--muted);
      font-size: 12px;
      font-weight:600;
    }
    .metric{
      text-align:center;
      min-width: 84px;
    }
    .metric .k{
      color: var(--muted);
      font-size: 12px;
      font-weight:700;
    }
    .metric .v{
      font-size: 22px;
      font-weight:900;
      margin-top:2px;
    }

    .inst{
      padding: 12px 14px;
    }
    .inst h2{
      margin:0 0 8px 0;
      font-size: 18px;
      letter-spacing:-.4px;
    }
    .inst .list{
      margin:0;
      padding-left: 18px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.5;
    }

    /* âœ… ê²Œì„ì˜ì—­: ë‚¨ëŠ” ê³µê°„ì„ "í•­ìƒ" ì°¨ì§€í•˜ê²Œ (ë³´í˜¸êµ¬ ì˜ì—­ì„ ê°€ë¦¬ì§€ ì•Šê²Œ) */
    .gameWrap{
      flex: 1 1 auto;           /* ë‚¨ëŠ” ë†’ì´ ì „ë¶€ */
      min-height: 220px;        /* ë„ˆë¬´ ì‘ì•„ì§€ì§€ ì•Šê²Œ */
      display:flex;
      flex-direction:column;
      gap: var(--gap);
    }

    .hud{
      display:flex;
      gap: var(--gap);
    }
    .pill{
      flex:1;
      background: rgba(255,255,255,.07);
      border:1px solid var(--stroke);
      border-radius: 999px;
      padding: 10px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-weight:800;
      letter-spacing:-.2px;
      color: var(--text);
    }
    .pill span{
      color: var(--muted);
      font-weight:800;
      font-size: 13px;
    }

    .dropZone{
      position:relative;
      flex: 1 1 auto;
      background: rgba(0,0,0,.15);
      border: 2px dashed rgba(255,255,255,.16);
      border-radius: var(--r);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .hint{
      color: rgba(234,240,255,.45);
      font-weight:900;
      text-align:center;
      padding: 0 14px;
      font-size: 16px;
      letter-spacing:-.3px;
    }

    .fall{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:-70px;
      width: calc(100% - 28px);
      max-width: 420px;
      padding: 14px 14px;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      border: 1px solid rgba(255,255,255,.18);
      text-align:center;
      font-weight: 1000;
      font-size: 26px;
      letter-spacing:-.8px;
      text-shadow: 0 8px 22px rgba(0,0,0,.55);
      line-height:1.15;
      will-change: transform, top;
    }

    /* âœ… ë³´í˜¸êµ¬ ì˜ì—­ì€ "ê³ ì • ë†’ì´"ë¡œ í•­ìƒ ë³´ì´ê²Œ */
    .bottom{
      flex: 0 0 auto;
    }
    .bottomHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      margin-bottom: 8px;
      padding: 0 4px;
    }
    .bottomHead .h{
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:-.6px;
    }
    .bottomHead .s{
      color: var(--muted);
      font-size: 13px;
      font-weight:800;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    button.choice{
      width:100%;
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius: 20px;
      padding: 14px 12px;
      color: var(--text);
      font-weight: 1000;
      font-size: 20px;
      letter-spacing:-.4px;
      box-shadow: 0 14px 28px rgba(0,0,0,.28);
      cursor:pointer;
      touch-action: manipulation;
    }
    button.choice small{
      display:block;
      margin-top: 6px;
      font-weight:800;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:-.2px;
    }
    button.choice:active{ transform: scale(.985); }

    /* ê²°ê³¼ íŒ¨ë„ */
    .result{
      position:absolute;
      inset: 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.40);
      border: 1px solid rgba(255,255,255,.16);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 14px;
    }
    .result .box{
      width:100%;
      max-width: 420px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.08));
      border: 1px solid rgba(255,255,255,.16);
      padding: 14px;
      text-align:center;
      box-shadow: var(--shadow);
    }
    .result .tag{
      font-size: 28px;
      font-weight: 1000;
      letter-spacing:-.6px;
      margin: 2px 0 10px;
    }
    .result .desc{
      color: var(--muted);
      font-size: 13px;
      line-height:1.45;
      font-weight:800;
      margin: 0 0 10px;
      word-break: keep-all;
    }
    .result img{
      width: min(240px, 62vw);
      height: auto;
      object-fit: contain;
      display:block;
      margin: 8px auto 10px;
      filter: drop-shadow(0 14px 18px rgba(0,0,0,.35));
    }
    .foot{
      margin-top: 8px;
      color: rgba(234,240,255,.55);
      font-size: 12px;
      font-weight:800;
      text-align:center;
    }

    /* ì•„ì£¼ ì‘ì€ í™”ë©´ì—ì„œ ê¸€ì”¨ ì‚´ì§ ì¤„ì´ê¸° */
    @media (max-height: 720px){
      .inst h2{font-size:16px}
      .fall{font-size: 22px}
      button.choice{font-size:18px; padding:12px 10px}
      .bottomHead .h{font-size:20px}
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- ìƒë‹¨ -->
    <div class="row top">
      <div class="card" style="flex:1.2">
        <div>
          <div class="title">ğŸ§¹ í™˜ê²½ê´€ë¦¬ PPE í€´ì¦ˆ</div>
          <div class="sub">ê¸°ë³¸ 4ì¢… Â· ì§ˆë³‘ëª… ë‚™í•˜</div>
        </div>
      </div>
      <div class="card metric">
        <div class="k">ë¬¸í•­</div>
        <div class="v" id="qView">0/10</div>
      </div>
      <div class="card metric">
        <div class="k">ì ìˆ˜</div>
        <div class="v" id="scoreView">0</div>
      </div>
    </div>

    <!-- ì•ˆë‚´ -->
    <div class="card inst">
      <h2>ì§ˆë³‘/ìƒí™©ì„ ë³´ê³  í•„ìš”í•œ PPE 1ê°œë¥¼ ê³ ë¥´ì„¸ìš”</h2>
      <ol class="list">
        <li>ì§ˆë³‘ëª…ì´ ë„¤ëª¨ì¹¸ ìœ„ì—ì„œ ì•„ë˜ë¡œ <b>5ì´ˆ</b> ë™ì•ˆ ë‚´ë ¤ì˜µë‹ˆë‹¤. (ì‹œê°„ ì´ˆê³¼ ì‹œ ì˜¤ë‹µ)</li>
        <li>ì•„ë˜ ë²„íŠ¼ì—ì„œ PPE 1ê°œë¥¼ ì„ íƒí•˜ë©´ <b>ìë™ ì±„ì </b> í›„ <b>ìë™ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œ</b>ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</li>
      </ol>
    </div>

    <!-- ê²Œì„ ì˜ì—­ -->
    <div class="gameWrap">
      <div class="hud">
        <div class="pill"><span>â³ ì œí•œì‹œê°„</span><b id="timeView">5.0s</b></div>
        <div class="pill"><span>ìƒíƒœ</span><b id="stateView">ëŒ€ê¸°</b></div>
      </div>

      <div class="dropZone" id="dropZone">
        <div class="hint" id="hint">ìë™ìœ¼ë¡œ ë¬¸ì œê°€ ì‹œì‘ë©ë‹ˆë‹¤</div>
        <div class="fall" id="fall" style="display:none;">ë¬¸ì œ</div>

        <div class="result" id="result">
          <div class="box">
            <img id="resultImg" src="assets/idle.png" alt="result" />
            <div class="tag" id="resultTag">ì •ë‹µ âœ…</div>
            <p class="desc" id="resultDesc"></p>
            <div class="foot">ë‹¤ìŒ ë¬¸ì œë¡œ ìë™ ì´ë™ ì¤‘â€¦</div>
          </div>
        </div>
      </div>
    </div>

    <!-- âœ… ë³´í˜¸êµ¬ ì„ íƒ: í•­ìƒ í™”ë©´ì— ë³´ì´ê²Œ -->
    <div class="bottom">
      <div class="bottomHead">
        <div class="h">ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</div>
        <div class="s">í•œ ë¬¸ì œë‹¹ 1ê°œë§Œ ì„ íƒ</div>
      </div>

      <div class="grid" id="choices">
        <button class="choice" data-key="mask">ë§ˆìŠ¤í¬<small>ê¸°ë³¸(ë¹„ë§/ë¶„ë¬´)</small></button>
        <button class="choice" data-key="n95">N95 ë§ˆìŠ¤í¬<small>ê³µê¸°(ê²°í•µ ë“±)</small></button>
        <button class="choice" data-key="gown_gloves">ê°€ìš´+ì¥ê°‘<small>ì ‘ì´‰(ì˜¤ì—¼ë¬¼ ì²˜ë¦¬)</small></button>
        <button class="choice" data-key="none">PPE ë¶ˆí•„ìš”<small>ìœ„í—˜ ë‚®ìŒ(êµìœ¡ìš©)</small></button>
      </div>

      <div class="foot">â€» êµìœ¡ìš© ë‹¨ìˆœí™” ë²„ì „ (í‘œì¤€ì£¼ì˜+ì¶”ê°€ì£¼ì˜ ê°œë… ê¸°ë°˜)</div>
    </div>
  </div>

  <script>
    // ===== ì„¤ì • =====
    const TOTAL = 10;
    const FALL_SECONDS = 5.0;         // âœ… 5ì´ˆ ë‚´ë ¤ì˜¤ê²Œ
    const AFTER_MS = 850;             // âœ… ì±„ì  í›„ ë‹¤ìŒë¬¸ì œ ìë™ ì´ë™ ì†ë„
    const TICK_MS = 50;

    // ì´ë¯¸ì§€ ê²½ë¡œ(ë ˆí¬ì— assets/correct.png, wrong.png, idle.png ìˆì–´ì•¼ í•¨)
    const IMG_IDLE = "assets/idle.png";
    const IMG_OK   = "assets/correct.png";
    const IMG_NO   = "assets/wrong.png";

    // ===== ë¬¸ì œ(êµìœ¡ìš© ë‹¨ìˆœí™”) =====
    // key: mask | n95 | gown_gloves | none
    const QUESTIONS = [
      { text:"ì¸í”Œë£¨ì—”ì í™˜ì êµ¬ì—­ ì²­ì†Œ", answer:"mask", explain:"ë¹„ë§/ë¶„ë¬´ ìœ„í—˜ â†’ ë§ˆìŠ¤í¬" },
      { text:"ê²°í•µ ë³‘ì‹¤ ì²­ì†Œ", answer:"n95", explain:"ê³µê¸°ë§¤ê°œ ìœ„í—˜ â†’ N95" },
      { text:"êµ¬í† ë¬¼(ì²´ì•¡) ì˜¤ì—¼ ë°”ë‹¥ ì²­ì†Œ", answer:"gown_gloves", explain:"ì²´ì•¡ ì ‘ì´‰ ìœ„í—˜ â†’ ê°€ìš´+ì¥ê°‘" },
      { text:"í˜ˆì•¡ ì†ŒëŸ‰ ë¬»ì€ ì†ì¡ì´ ë‹¦ê¸°", answer:"gown_gloves", explain:"ì˜¤ì—¼ë¬¼ ì ‘ì´‰ ê°€ëŠ¥ â†’ ê°€ìš´+ì¥ê°‘" },
      { text:"ë§ˆìŠ¤í¬ ì°©ìš©í•œ í™˜ì ëŒ€ê¸°êµ¬ì—­ ì˜ì ì •ë¦¬", answer:"none", explain:"ìœ„í—˜ ë‚®ìŒ(êµìœ¡ìš©) â†’ PPE ë¶ˆí•„ìš”" },
      { text:"ê°ê¸° ì˜ì‹¬ í™˜ì ì•ˆë‚´ ë°ìŠ¤í¬ ì£¼ë³€ ë‹¦ê¸°", answer:"mask", explain:"ë¹„ë§ ë…¸ì¶œ ê°€ëŠ¥ â†’ ë§ˆìŠ¤í¬" },
      { text:"VRE ê²©ë¦¬ì‹¤ í‡´ì‹¤ í›„ í™˜ê²½ì •ë¦¬", answer:"gown_gloves", explain:"ì ‘ì´‰ì£¼ì˜ ìƒí™© â†’ ê°€ìš´+ì¥ê°‘" },
      { text:"ê²°í•µ ì˜ì‹¬ì ë™ì„  ì²­ì†Œ", answer:"n95", explain:"ê³µê¸°ì£¼ì˜ ìƒí™©(êµìœ¡ìš©) â†’ N95" },
      { text:"ì¼ë°˜ ì‚¬ë¬´ì‹¤ ì±…ìƒ ë¨¼ì§€ ì œê±°", answer:"none", explain:"ì˜ë£Œ ì˜¤ì—¼ ìœ„í—˜ ë‚®ìŒ â†’ PPE ë¶ˆí•„ìš”" },
      { text:"ì²´ì•¡ì´ íŠ„ ì¹¨ëŒ€ë‚œê°„ ì†Œë…", answer:"gown_gloves", explain:"ì˜¤ì—¼ë¬¼ ì ‘ì´‰ ê°€ëŠ¥ â†’ ê°€ìš´+ì¥ê°‘" }
    ];

    // ===== ìƒíƒœ =====
    let idx = 0;
    let score = 0;
    let running = false;
    let locked = false;
    let startTime = 0;
    let timer = null;

    const qView = document.getElementById("qView");
    const scoreView = document.getElementById("scoreView");
    const timeView = document.getElementById("timeView");
    const stateView = document.getElementById("stateView");
    const hint = document.getElementById("hint");
    const fall = document.getElementById("fall");
    const dropZone = document.getElementById("dropZone");
    const result = document.getElementById("result");
    const resultTag = document.getElementById("resultTag");
    const resultDesc = document.getElementById("resultDesc");
    const resultImg = document.getElementById("resultImg");

    function setHud(){
      qView.textContent = `${Math.min(idx+1, TOTAL)}/${TOTAL}`;
      scoreView.textContent = String(score);
    }

    function showResult(isCorrect, q, pickedLabel){
      result.style.display = "flex";
      resultImg.src = isCorrect ? IMG_OK : IMG_NO;
      resultTag.textContent = isCorrect ? "ì •ë‹µ âœ…" : "ì˜¤ë‹µ âŒ";
      const picked = pickedLabel ? `ì„ íƒ: ${pickedLabel}` : "ì„ íƒ ì—†ìŒ(ì‹œê°„ ì´ˆê³¼)";
      resultDesc.textContent =
        `ë¬¸ì œ: ${q.text} Â· ${picked} Â· ì •ë‹µ: ${labelOf(q.answer)}\nì„¤ëª…: ${q.explain}`;
    }

    function hideResult(){
      result.style.display = "none";
      resultImg.src = IMG_IDLE;
      resultDesc.textContent = "";
    }

    function labelOf(key){
      switch(key){
        case "mask": return "ë§ˆìŠ¤í¬";
        case "n95": return "N95 ë§ˆìŠ¤í¬";
        case "gown_gloves": return "ê°€ìš´+ì¥ê°‘";
        case "none": return "PPE ë¶ˆí•„ìš”";
        default: return key;
      }
    }

    function stopTimer(){
      if(timer){ clearInterval(timer); timer = null; }
    }

    function startQuestion(){
      if(idx >= TOTAL){
        finish();
        return;
      }

      locked = false;
      running = true;
      hideResult();

      const q = QUESTIONS[idx];
      setHud();

      stateView.textContent = "ì§„í–‰";
      hint.style.display = "none";
      fall.style.display = "block";
      fall.textContent = q.text;

      // ì‹œì‘ ìœ„ì¹˜ ì´ˆê¸°í™”
      fall.style.top = "-80px";

      // ë“œë¡­ì¡´ ë†’ì´ì— ë§ì¶° ì´ë™ (ì•„ë˜ìª½ ì—¬ìœ )
      const zoneH = dropZone.clientHeight;
      const endTop = Math.max(40, zoneH - 110);

      startTime = performance.now();

      stopTimer();
      timer = setInterval(() => {
        const now = performance.now();
        const elapsed = (now - startTime) / 1000;
        const remain = Math.max(0, FALL_SECONDS - elapsed);

        timeView.textContent = `${remain.toFixed(1)}s`;

        // 0~1 ë¹„ìœ¨ë¡œ ìœ„ì¹˜ ê³„ì‚°
        const t = Math.min(1, elapsed / FALL_SECONDS);
        const top = -80 + (endTop + 80) * t;
        fall.style.top = `${top}px`;

        if(elapsed >= FALL_SECONDS){
          // ì‹œê°„ì´ˆê³¼
          stopTimer();
          running = false;
          locked = true;

          showResult(false, q, "");
          stateView.textContent = "ì‹œê°„ì´ˆê³¼";

          setTimeout(() => {
            nextQuestion();
          }, AFTER_MS);
        }
      }, TICK_MS);
    }

    function grade(pickKey){
      if(locked) return;
      locked = true;

      const q = QUESTIONS[idx];
      const correct = (pickKey === q.answer);
      if(correct) score += 1;

      stopTimer();
      running = false;

      showResult(correct, q, labelOf(pickKey));
      stateView.textContent = correct ? "ì •ë‹µ" : "ì˜¤ë‹µ";
      scoreView.textContent = String(score);

      setTimeout(() => {
        nextQuestion();
      }, AFTER_MS);
    }

    function nextQuestion(){
      // ë‹¤ìŒ ë¬¸ì œ ì¤€ë¹„
      idx += 1;

      hideResult();
      fall.style.display = "none";
      hint.style.display = "block";
      hint.textContent = "ë‹¤ìŒ ë¬¸ì œê°€ ì‹œì‘ë©ë‹ˆë‹¤â€¦";

      timeView.textContent = `${FALL_SECONDS.toFixed(1)}s`;
      stateView.textContent = "ëŒ€ê¸°";

      setTimeout(() => {
        startQuestion();
      }, 250);
    }

    function finish(){
      stopTimer();
      running = false;
      locked = true;

      fall.style.display = "none";
      hint.style.display = "block";
      hint.textContent = `êµìœ¡ ì™„ë£Œ ğŸ‘ ì ìˆ˜: ${score}/${TOTAL}`;

      stateView.textContent = "ì™„ë£Œ";
      timeView.textContent = "-";
      qView.textContent = `${TOTAL}/${TOTAL}`;
    }

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById("choices").addEventListener("click", (e) => {
      const btn = e.target.closest("button.choice");
      if(!btn) return;
      if(!running || locked) return;
      grade(btn.dataset.key);
    });

    // âœ… ì‹œì‘ë²„íŠ¼ ì—†ì´ ìë™ ì‹œì‘
    window.addEventListener("load", () => {
      idx = 0;
      score = 0;
      setHud();
      timeView.textContent = `${FALL_SECONDS.toFixed(1)}s`;
      stateView.textContent = "ëŒ€ê¸°";
      hint.textContent = "ìë™ìœ¼ë¡œ ë¬¸ì œê°€ ì‹œì‘ë©ë‹ˆë‹¤";
      resultImg.src = IMG_IDLE;

      setTimeout(() => startQuestion(), 350);
    });

    // í™”ë©´ íšŒì „/ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ë“œë¡­ì¡´ ë†’ì´ê°€ ë°”ë€Œë©´ ë‹¤ìŒ í‹±ì—ì„œ ìì—°íˆ ë°˜ì˜ë˜ë„ë¡
    window.addEventListener("resize", () => {
      // í˜„ì¬ ë¬¸ì œ ì§„í–‰ ì¤‘ì´ë©´ ê¸€ìê°€ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šê²Œ ì‚´ì§ ìœ„ë¡œ ë³´ì •
      if(running){
        const zoneH = dropZone.clientHeight;
        const endTop = Math.max(40, zoneH - 110);
        const curTop = parseFloat(getComputedStyle(fall).top) || 0;
        if(curTop > endTop) fall.style.top = `${endTop}px`;
      }
    });
  </script>
</body>
</html>
```î¨0î¨‚
