<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>í™˜ê²½ê´€ë¦¬ë‹´ë‹¹ì ë³´í˜¸êµ¬ êµìœ¡</title>
  <style>
    :root{
      --bg1:#071022;
      --bg2:#050a14;
      --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --text:#eaf0ff;
      --muted: rgba(234,240,255,.75);
      --r: 22px;
      --shadow: 0 18px 40px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
      background: radial-gradient(1200px 800px at 50% 0%, rgba(255,255,255,.06), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden; /* ê²Œì„ í™”ë©´ ê³ ì • */
    }

    .app{
      min-height:100dvh;
      padding: 12px 12px calc(12px + env(safe-area-inset-bottom));
      display:flex;
      flex-direction:column;
      gap:12px;
      max-width: 820px;
      margin:0 auto;
    }

    /* ===== ìƒë‹¨ë°” (ë†’ì´ ì¤„ì„) ===== */
    .topbar{
      display:grid;
      grid-template-columns: 1fr auto auto; /* ì œëª© | ë¬¸í•­/ì ìˆ˜ | ì¬ì‹œì‘ */
      gap:10px;
      align-items:stretch;
    }
    .pill{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      min-height: 56px;
    }
    .titleBox{
      gap:10px;
      justify-content:flex-start;
    }
    .titleBox .t1{font-size:18px; font-weight:800; line-height:1.15;}
    .titleBox .t2{font-size:12px; color:var(--muted); margin-top:2px}
    .statBox{
      width: 130px;
      justify-content:center;
      gap:8px;
      text-align:center;
      flex-direction:column;
    }
    .statBox .big{font-size:18px; font-weight:800; line-height:1}
    .statBox .small{font-size:12px; color:var(--muted); line-height:1}

    .restartBtn{
      width: 56px;
      height: 56px;
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: var(--card);
      color: var(--text);
      box-shadow: var(--shadow);
      font-size:12px;
      font-weight:700;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }

    /* ===== íƒ€ì´ë¨¸ ì¤„ ===== */
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      align-items:stretch;
    }
    .row .pill{min-height:52px}
    .row .label{font-size:12px; color:var(--muted)}
    .row .value{font-size:18px; font-weight:800}

    /* ===== ê²Œì„ ì˜ì—­ (ë¬¸ì œê°€ ì—¬ê¸°ì„œ ë‚´ë ¤ì˜´) ===== */
    .arena{
      position:relative;
      flex: 1 1 auto;
      min-height: 280px;
      background: rgba(255,255,255,.03);
      border: 1px dashed rgba(255,255,255,.18);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
      padding: 16px 14px;
    }
    .track{
      position:absolute;
      top:10px; left:12px; right:12px;
      height: 8px;
      display:flex;
      gap:6px;
      opacity:.6;
    }
    .track span{
      flex:1;
      border-radius: 99px;
      background: rgba(255,255,255,.10);
    }

    .fallItem{
      position:absolute;
      left: 12px;
      right: 12px;
      top: -80px; /* ì‹œì‘ì€ ìœ„ */
      display:flex;
      justify-content:center;
      pointer-events:none;
    }
    .fallBubble{
      width: min(520px, 92%);
      padding: 16px 18px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      font-weight:900;
      font-size: clamp(18px, 3.8vw, 28px);
      letter-spacing: -0.4px;
      text-align:center;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* ì •ë‹µ/ì˜¤ë‹µ ì´ë¯¸ì§€ ì˜¤ë²„ë ˆì´ */
    .resultOverlay{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.25);
      opacity:0;
      pointer-events:none;
      transition: opacity .12s ease;
    }
    .resultOverlay.show{opacity:1}
    .resultOverlay img{
      width: min(220px, 55vw);
      height:auto;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,.55));
    }

    /* ===== ì„ íƒ ë²„íŠ¼ ì˜ì—­ ===== */
    .answers{
      flex: 0 0 auto;
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .answersTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:10px;
      margin-bottom:10px;
    }
    .answersTop .h{font-size:18px; font-weight:900}
    .answersTop .s{font-size:12px; color:var(--muted)}
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--text);
      border-radius: 18px;
      padding: 16px 14px;
      box-shadow: var(--shadow);
      cursor:pointer;
      text-align:center;
      -webkit-tap-highlight-color: transparent;
    }
    .btn .b1{font-size:22px; font-weight:1000}
    .btn .b2{font-size:13px; color:var(--muted); margin-top:6px; font-weight:700}

    .hint{
      margin-top:10px;
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      font-weight:700;
    }

    /* ì‘ì€ í™”ë©´ ë³´í˜¸: ë²„íŠ¼ì´ ì˜ë¦¬ì§€ ì•Šê²Œ */
    @media (max-height: 720px){
      .arena{min-height: 240px;}
      .btn{padding: 14px 12px}
      .btn .b1{font-size:20px}
    }
    @media (max-height: 640px){
      .arena{min-height: 220px;}
      .fallBubble{padding: 14px 16px;}
      .answersTop .h{font-size:16px}
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- ìƒë‹¨ -->
    <div class="topbar">
      <div class="pill titleBox">
        <div>
          <div class="t1">ğŸ§¹ í™˜ê²½ê´€ë¦¬ë‹´ë‹¹ì ë³´í˜¸êµ¬ êµìœ¡</div>
          <div class="t2">ë‚™í•˜ í€´ì¦ˆ</div>
        </div>
      </div>

      <div class="pill statBox">
        <div class="small">ë¬¸í•­</div>
        <div class="big"><span id="qNow">1</span>/<span id="qTotal">5</span></div>
      </div>

      <button class="restartBtn" id="restartBtn" type="button" title="ì¬ì‹œì‘">
        â†»
      </button>
    </div>

    <!-- ìƒíƒœì¤„ -->
    <div class="row">
      <div class="pill">
        <div>
          <div class="label">â³ ì œí•œì‹œê°„</div>
          <div class="value"><span id="timeLeft">5.0</span>s</div>
        </div>
      </div>
      <div class="pill">
        <div>
          <div class="label">ì ìˆ˜</div>
          <div class="value"><span id="score">0</span></div>
        </div>
      </div>
    </div>

    <!-- ê²Œì„ì˜ì—­ -->
    <div class="arena" id="arena">
      <div class="track" aria-hidden="true">
        <span></span><span></span><span></span><span></span><span></span>
      </div>

      <div class="fallItem" id="fallItem">
        <div class="fallBubble" id="questionText">ë¡œë”©â€¦</div>
      </div>

      <div class="resultOverlay" id="resultOverlay">
        <img id="resultImg" alt="result" src="assets/idle.png" />
      </div>
    </div>

    <!-- ì„ íƒ -->
    <div class="answers">
      <div class="answersTop">
        <div class="h">ë³´í˜¸êµ¬ ì„ íƒ (4ê°œ)</div>
        <div class="s">í•œ ë¬¸ì œë‹¹ 1ê°œë§Œ ì„ íƒ</div>
      </div>
      <div class="grid">
        <button class="btn" data-a="mask" type="button">
          <div class="b1">ë§ˆìŠ¤í¬</div>
          <div class="b2">ê¸°ë³¸(ë¹„ë§/ë¶„ë¬´)</div>
        </button>
        <button class="btn" data-a="n95" type="button">
          <div class="b1">N95</div>
          <div class="b2">ê³µê¸°(ê²°í•µ ë“±)</div>
        </button>
        <button class="btn" data-a="gown" type="button">
          <div class="b1">ê°€ìš´+ì¥ê°‘</div>
          <div class="b2">ì ‘ì´‰(ì˜¤ì—¼ë¬¼ ì²˜ë¦¬)</div>
        </button>
        <button class="btn" data-a="none" type="button">
          <div class="b1">ë³´í˜¸êµ¬ ë¶ˆí•„ìš”</div>
          <div class="b2">ìœ„í—˜ ë‚®ìŒ(êµìœ¡ìš©)</div>
        </button>
      </div>
      <div class="hint">ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</div>
    </div>
  </div>

<script>
/** ====== ë¬¸ì œ 5ê°œ(ì›í•˜ë©´ ì—¬ê¸°ë§Œ ë°”ê¾¸ë©´ ë¨) ====== */
const QUESTIONS = [
  { text: "ì¸í”Œë£¨ì—”ì í™˜ì êµ¬ì—­ ì²­ì†Œ", answer: "mask" },
  { text: "ê²°í•µ ì˜ì‹¬ í™˜ì ë°© ì²­ì†Œ", answer: "n95" },
  { text: "VRE/CRE ì¥ê¸° ì¬ì‹¤ ë³‘ì‹¤ í‡´ì‹¤ í›„ ì²­ì†Œ", answer: "gown" },
  { text: "í˜ˆì•¡/ì²´ì•¡ ì˜¤ì—¼ë¬¼ ì²˜ë¦¬(ìŠ¤í•„)", answer: "gown" },
  { text: "ì¼ë°˜ ë³µë„ ì²­ì†Œ", answer: "none" },
];

document.getElementById("qTotal").textContent = QUESTIONS.length;

/** ====== ìƒíƒœ ====== */
let idx = 0;
let score = 0;
let running = false;
let answered = false;

let startTs = 0;
let lastFrame = 0;

const fallItem = document.getElementById("fallItem");
const questionText = document.getElementById("questionText");
const arena = document.getElementById("arena");

const timeLeftEl = document.getElementById("timeLeft");
const scoreEl = document.getElementById("score");
const qNowEl = document.getElementById("qNow");

const overlay = document.getElementById("resultOverlay");
const resultImg = document.getElementById("resultImg");

const FALL_DURATION_MS = 5000; // 5ì´ˆ ë™ì•ˆ ìœ„->ì•„ë˜
const SHOW_RESULT_MS = 650;    // ì •ë‹µ/ì˜¤ë‹µ ì´ë¯¸ì§€ ë³´ì—¬ì£¼ëŠ” ì‹œê°„

/** ====== ìœ í‹¸: ì´ë¯¸ì§€ í‘œì‹œ ====== */
function showResult(kind){
  // ê²½ë¡œ ì¤‘ìš”: í˜„ì¬ íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— assetsê°€ ìˆìœ¼ë‹ˆ "assets/íŒŒì¼ëª….png"
  const src = kind === "correct" ? "assets/correct.png"
            : kind === "wrong"   ? "assets/wrong.png"
            : "assets/idle.png";

  resultImg.src = src;
  overlay.classList.add("show");
  setTimeout(()=> overlay.classList.remove("show"), SHOW_RESULT_MS);
}

/** ====== ë¬¸ì œ ë¡œë“œ ====== */
function loadQuestion(){
  const q = QUESTIONS[idx];
  qNowEl.textContent = String(idx + 1);
  questionText.textContent = q.text;

  // ì‹œì‘ ìœ„ì¹˜ ìœ„ë¡œ
  fallItem.style.top = "-80px";
  answered = false;

  startTs = performance.now();
  lastFrame = startTs;
  running = true;
  requestAnimationFrame(tick);
}

/** ====== í”„ë ˆì„: ë‚™í•˜ ====== */
function tick(ts){
  if(!running) return;

  const elapsed = ts - startTs;
  const p = Math.min(1, elapsed / FALL_DURATION_MS); // 0~1
  const arenaH = arena.clientHeight;

  // ìœ„(-80) -> ì•„ë˜( arenaH - 120 ì •ë„ )
  const yStart = -80;
  const yEnd = arenaH - 120;   // ë§í’ì„ ì´ ë°”ë‹¥ì— ê±¸ì¹˜ì§€ ì•Šê²Œ
  const y = yStart + (yEnd - yStart) * p;

  fallItem.style.top = y + "px";

  // ë‚¨ì€ ì‹œê°„ í‘œì‹œ
  const left = Math.max(0, (FALL_DURATION_MS - elapsed) / 1000);
  timeLeftEl.textContent = left.toFixed(1);

  // ì‹œê°„ ì´ˆê³¼ = ì˜¤ë‹µ ì²˜ë¦¬ (ì„ íƒ ëª» í–ˆìœ¼ë©´)
  if(p >= 1 && !answered){
    answered = true;
    running = false;
    showResult("wrong");
    setTimeout(nextQuestion, SHOW_RESULT_MS);
    return;
  }

  requestAnimationFrame(tick);
}

/** ====== ë‹µì•ˆ ì„ íƒ ====== */
function choose(ans){
  if(answered) return;
  answered = true;
  running = false;

  const correct = QUESTIONS[idx].answer === ans;
  if(correct) score += 1;

  scoreEl.textContent = String(score);
  showResult(correct ? "correct" : "wrong");

  setTimeout(nextQuestion, SHOW_RESULT_MS);
}

function nextQuestion(){
  idx += 1;
  if(idx >= QUESTIONS.length){
    // ë
    questionText.textContent = `ë! ì ìˆ˜: ${score}/${QUESTIONS.length}`;
    fallItem.style.top = "42%";
    timeLeftEl.textContent = "0.0";
    return;
  }
  loadQuestion();
}

/** ====== ì¬ì‹œì‘ ====== */
function restart(){
  idx = 0;
  score = 0;
  scoreEl.textContent = "0";
  timeLeftEl.textContent = "5.0";
  showResult("idle");
  loadQuestion();
}

document.querySelectorAll(".btn").forEach(btn=>{
  btn.addEventListener("click", ()=> choose(btn.dataset.a));
});

document.getElementById("restartBtn").addEventListener("click", restart);

/** ì‹œì‘ */
restart();
</script>
</body>
</html>
